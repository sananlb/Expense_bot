# Настройка умной системы ключевых слов с AI

## Как это работает

Система автоматически управляет ключевыми словами для категорий расходов:

1. **При создании новой категории** - AI анализирует все существующие категории и:
   - Генерирует релевантные ключевые слова для новой категории
   - Перераспределяет существующие ключевые слова между категориями
   - Убирает дубликаты

2. **При изменении категории расхода** - система автоматически:
   - Извлекает значимые слова из описания расхода
   - Добавляет их как ключевые слова к новой категории
   - Обучается на действиях пользователя

## Настройка

API ключ уже настроен в проекте! Используется существующий `GOOGLE_API_KEY` из файла `.env`.

Если вы хотите использовать отдельный ключ для AI, можете добавить в `.env`:
```
GOOGLE_AI_API_KEY=ваш_ключ_здесь
```

3. Библиотека уже установлена в requirements.txt:
   ```
   google-generativeai==0.7.2
   ```

## Примеры работы

### Пример 1: Создание категории "Кофе"

Пользователь создаёт категорию "☕ Кофе". AI автоматически:
- Добавит ключевые слова: капучино, латте, эспрессо, американо, раф, кофейня
- Уберёт эти слова из категории "Кафе и рестораны"

### Пример 2: Обучение на изменениях

1. Пользователь добавил расход "Капучино в старбакс 350"
2. Бот определил категорию "Кафе и рестораны"
3. Пользователь изменил на "☕ Кофе"
4. Система автоматически добавит "капучино" и "старбакс" в ключевые слова категории "Кофе"

## Преимущества

- **Полная автоматизация** - пользователю не нужно ничего настраивать
- **Персонализация** - у каждого пользователя свои ключевые слова
- **Обучение** - система становится умнее с каждым использованием
- **Интеллект** - AI понимает контекст и связи между категориями

## Тестирование

Запустите тестовый скрипт:
```bash
python test_ai_keywords.py
```

Он покажет, как работает оптимизация ключевых слов.
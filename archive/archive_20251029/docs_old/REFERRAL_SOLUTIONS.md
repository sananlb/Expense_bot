# –†–µ—à–µ–Ω–∏—è –¥–ª—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã Telegram Stars

## –ü—Ä–æ–±–ª–µ–º–∞:
Telegram Bot API **–ù–ï –ø–æ–∑–≤–æ–ª—è–µ—Ç** –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å Stars –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏. –ë–æ—Ç—ã –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ:
- –ü—Ä–∏–Ω–∏–º–∞—Ç—å –ø–ª–∞—Ç–µ–∂–∏ Stars
- –î–µ–ª–∞—Ç—å –ø–æ–ª–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç –ø–ª–∞—Ç–µ–ª—å—â–∏–∫—É
- –ù–ï –º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å Stars —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º

## –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –±–∞–ª–∞–Ω—Å + —Å–∫–∏–¥–∫–∏ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)
**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –†–µ—Ñ–µ—Ä–µ—Ä –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –±–∞–ª–ª—ã (–Ω–µ Stars)
2. –ë–∞–ª–ª—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–ø–ª–∞—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏
3. –ü—Ä–∏ –æ–ø–ª–∞—Ç–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–∫–∏–¥–∫–∞ –Ω–∞ —Å—É–º–º—É –±–∞–ª–ª–æ–≤

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
# –î–æ–±–∞–≤–∏—Ç—å –≤ –º–æ–¥–µ–ª—å Profile
class Profile(models.Model):
    referral_balance = models.IntegerField(default=0)  # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –±–∞–ª–ª—ã

# –ü—Ä–∏ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏ –∫–æ–º–∏—Å—Å–∏–∏
referrer.referral_balance += commission_amount
referrer.save()

# –ü—Ä–∏ –æ–ø–ª–∞—Ç–µ –ø–æ–¥–ø–∏—Å–∫–∏
if user.referral_balance > 0:
    discount = min(user.referral_balance, subscription_price)
    final_price = subscription_price - discount
    # –°–æ–∑–¥–∞—Ç—å –∏–Ω–≤–æ–π—Å –Ω–∞ final_price Stars
```

**–ü–ª—é—Å—ã:**
- –ó–∞–∫–æ–Ω–Ω–æ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∞–ª–ª—ã
- –ù–µ—Ç –æ–±–º–∞–Ω–∞ —Å –≤—ã–ø–ª–∞—Ç–∞–º–∏

**–ú–∏–Ω—É—Å—ã:**
- –ù–µ –Ω–∞—Å—Ç–æ—è—â–∏–µ Stars
- –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –±–æ—Ç–∞

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ + —Ä—É—á–Ω—ã–µ –≤—ã–ø–ª–∞—Ç—ã
**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –ù–∞–∫–∞–ø–ª–∏–≤–∞–µ–º –∫–æ–º–∏—Å—Å–∏–∏ –≤ –ë–î
2. –†–∞–∑ –≤ –º–µ—Å—è—Ü —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫
3. –í—ã–ø–ª–∞—á–∏–≤–∞–µ–º –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –¥—Ä—É–≥–∏–µ –∫–∞–Ω–∞–ª—ã

**–ú–∏–Ω—É—Å—ã:**
- –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã
- –°–ª–æ–∂–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 3: –î—Ä—É–≥–∏–µ –±–æ–Ω—É—Å—ã –≤–º–µ—Å—Ç–æ Stars
**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. –í–º–µ—Å—Ç–æ Stars –¥–∞–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
   - –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –¥–Ω–∏ –ø–æ–¥–ø–∏—Å–∫–∏
   - –ü—Ä–µ–º–∏—É–º —Ñ—É–Ω–∫—Ü–∏–∏
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–ü–ª—é—Å—ã:**
- –ß–µ—Å—Ç–Ω–æ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ
- –õ–µ–≥–∫–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 4: –û—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É (–≤—Ä–µ–º–µ–Ω–Ω–æ)
**–ï—Å–ª–∏ –Ω–µ—Ç —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é:**
1. –û—Ç–∫–ª—é—á–∏—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É
2. –û–±—ä—è—Å–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
3. –í–µ—Ä–Ω—É—Ç—å—Å—è –∫–æ–≥–¥–∞ Telegram –¥–æ–±–∞–≤–∏—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–¥–æ–≤

## –°—Ä–æ—á–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:

### 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–æ–∂–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```python
# –í expenses/tasks.py, —Ñ—É–Ω–∫—Ü–∏—è _notify_commission_paid
def _notify_commission_paid(commission):
    # –í–†–ï–ú–ï–ù–ù–û –û–¢–ö–õ–Æ–ß–ï–ù–û
    return
    # –°—Ç–∞—Ä—ã–π –∫–æ–¥ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º...
```

### 2. –ò–∑–º–µ–Ω–∏—Ç—å —Ç–µ–∫—Å—Ç—ã
```python
# –í bot/texts.py
'referral_commission_pending': (
    'üìä –ù–∞—á–∏—Å–ª–µ–Ω—ã —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –±–∞–ª–ª—ã!\n\n'
    'üí∞ –°—É–º–º–∞: {amount} –±–∞–ª–ª–æ–≤\n'
    'üë§ –û—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {user}\n\n'
    'üí° –ë–∞–ª–ª—ã –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–ø–ª–∞—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏'
),
```

### 3. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—Ç—å:
"‚ö†Ô∏è –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –≤ –≤–∏–¥–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –±–∞–ª–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–ø–ª–∞—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏ –≤ –±–æ—Ç–µ"

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Telegram:
–ü–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é –Ω–∞ 2024 –≥–æ–¥, Telegram Bot API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- –ü–µ—Ä–µ–≤–æ–¥ Stars –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ß–∞—Å—Ç–∏—á–Ω—ã–π –≤–æ–∑–≤—Ä–∞—Ç Stars
- –°–æ–∑–¥–∞–Ω–∏–µ "–∫–æ—à–µ–ª—å–∫–æ–≤" –¥–ª—è Stars

–≠—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, –Ω–µ –±–∞–≥ –≤ –Ω–∞—à–µ–º –∫–æ–¥–µ.
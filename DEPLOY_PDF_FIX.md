# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö PDF –æ—Ç—á–µ—Ç–æ–≤

## –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã:
1. **–õ–æ–≥–∏–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π**: –ü–æ–∫–∞–∑ —Ç–æ–ø-9 –∫–∞—Ç–µ–≥–æ—Ä–∏–π + "–û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏" –ø—Ä–∏ 11+ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö (–≤–º–µ—Å—Ç–æ —Ç–æ–ø-7 + "–î—Ä—É–≥–æ–µ")
2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º**: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç–∏
3. **–¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞**: –ì–∞—Ä–º–æ–Ω–∏—á–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞, —Å–æ—á–µ—Ç–∞—é—â–∞—è—Å—è —Å —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–º —Ü–≤–µ—Ç–æ–º –∑–∞–≥–æ–ª–æ–≤–∫–∞
4. **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π –Ω–∞ —è–∑—ã–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (ru/en)
5. **–ú—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–æ—Å—Ç—å**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ 2-—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –≤–∞–ª—é—Ç –≤ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ –ø–æ –º–µ—Å—è—Ü–∞–º
6. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ async/await**: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å QuerySet –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ

### üìä –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ—Ç—á–µ—Ç–∞—Ö:
- –ü—Ä–∏ 11+ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è 9 –æ—Å–Ω–æ–≤–Ω—ã—Ö + "–û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏"
- –ü—Ä–∏ –º–µ–Ω–µ–µ 11 –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è 7 –æ—Å–Ω–æ–≤–Ω—ã—Ö + "–î—Ä—É–≥–æ–µ" (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º" —Å –¥–∞–Ω–Ω—ã–º–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ —è–∑—ã–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# 1. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh batman@80.66.87.178

# 2. –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /home/batman/expense_bot

# 3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ –µ—Å—Ç—å)
git stash

# 4. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
git fetch --all
git reset --hard origin/master
git pull origin master

# 5. –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker-compose build --no-cache

# 6. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å –Ω–æ–≤—ã–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
docker-compose up -d --force-recreate

# 7. –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –æ–±—Ä–∞–∑–æ–≤
docker image prune -f

# 8. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –±–æ—Ç–∞
docker-compose logs -f expense_bot_app --tail=100

# 9. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
docker-compose logs -f expense_bot_web --tail=100
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/expenses`
3. –í—ã–±–µ—Ä–∏—Ç–µ "üìÖ –° –Ω–∞—á–∞–ª–∞ –º–µ—Å—è—Ü–∞"
4. –ù–∞–∂–º–∏—Ç–µ "üìÑ PDF –æ—Ç—á–µ—Ç"
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (9 + "–û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏" –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ)
   - –ù–∞–ª–∏—á–∏–µ —Ç–∞–±–ª–∏—Ü—ã "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º"
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ü–≤–µ—Ç–∞ –≤ –¥–∏–∞–≥—Ä–∞–º–º–∞—Ö
   - –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —è–∑—ã–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

## –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### `/bot/services/pdf_report.py`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (9 –ø—Ä–∏ 11+ –∫–∞—Ç–µ–≥–æ—Ä–∏—è—Ö, –∏–Ω–∞—á–µ 7)
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –º–µ—Å—è—Ü–∞–º
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ü–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ (15 –º—Ä–∞—á–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:
1. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π:**
```python
max_display_categories = 9 if total_categories_count >= 11 else 7
```

2. **–ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π:**
```python
other_name = '–û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏' if total_categories_count >= 11 else '–î—Ä—É–≥–æ–µ'
```

3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –º–µ—Å—è—Ü–∞–º** - –¥–æ–±–∞–≤–ª–µ–Ω —Ä–∞—Å—á–µ—Ç –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤

4. **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ–ª—è name_ru/name_en –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏

## –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ

–õ–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ —Å Playwright –Ω–∞ Windows –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ PDF –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ.

## –û—Ç–∫–∞—Ç –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:
```bash
# –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
git reset --hard HEAD~1
docker-compose build --no-cache
docker-compose up -d --force-recreate
```
# üîí –ü–ª–∞–Ω —É–¥–∞–ª–µ–Ω–∏—è PII (Personally Identifiable Information) –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-11
**–°—Ç–∞—Ç—É—Å:** üìã –í –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏
**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π:** DevOps/Backend team
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî¥ –í—ã—Å–æ–∫–∏–π (GDPR compliance)

---

## üìå –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–¶–µ–ª—å –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ](#—Ü–µ–ª—å-–∏-–æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ)
- [–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è](#—Ç–µ–∫—É—â–∞—è-—Å–∏—Ç—É–∞—Ü–∏—è)
- [–ß—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ](#—á—Ç–æ-–±—É–¥–µ—Ç-—É–¥–∞–ª–µ–Ω–æ)
- [–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#–ø–ª–∞–Ω-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
- [–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏](#–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ-–ø—Ä–æ–≤–µ—Ä–∫–∏)
- [–†–∏—Å–∫–∏ –∏ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](#—Ä–∏—Å–∫–∏-–∏-–º–µ—Ä—ã-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)
- [–ß–µ–∫–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è](#—á–µ–∫–ª–∏—Å—Ç-–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è)
- [–û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π](#–æ—Ç–∫–∞—Ç-–∏–∑–º–µ–Ω–µ–Ω–∏–π)

---

## üéØ –¶–µ–ª—å –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

### –¶–µ–ª—å:
–ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (`username`, `first_name`, `last_name`) –∏–∑ –∫–æ–¥–∞, –ª–æ–≥–æ–≤ –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û `telegram_id` –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### –û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:
1. **GDPR Compliance:** –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. **Privacy by Design:** –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É—Ç–µ—á–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ª–æ–≥–æ–≤:** –õ–æ–≥–∏ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç PII –∏ –º–æ–≥—É—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
4. **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:** –ú–µ–Ω—å—à–µ –¥–∞–Ω–Ω—ã—Ö = –º–µ–Ω—å—à–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
5. **–ó–∞—â–∏—Ç–∞ –æ—Ç —É—Ç–µ—á–µ–∫:** –î–∞–∂–µ –ø—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –ª–æ–≥–æ–≤/–ë–î –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ü–æ—á–µ–º—É telegram_id –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ:
- ‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ
- ‚úÖ –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –ù–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –ª–∏—á–Ω–æ—Å—Ç—å –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ Telegram API
- ‚úÖ –ù–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è —Ä–∞–±–æ—Ç—ã Telegram Bot API

---

## üìä –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

### –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö (`database/models.py`):

```python
class Profile(models.Model):
    telegram_id = models.BigIntegerField(unique=True, primary_key=True)  # ‚úÖ –û—Å—Ç–∞–≤–ª—è–µ–º
    first_name = models.CharField(max_length=100)                         # ‚ùå –£–¥–∞–ª–∏—Ç—å
    username = models.CharField(max_length=100, null=True, blank=True)    # ‚ùå –£–¥–∞–ª–∏—Ç—å
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è
```

### –ù–∞–π–¥–µ–Ω–æ —Ñ–∞–π–ª–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `username`: **31**

#### –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –§–∞–π–ª–æ–≤ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|--------|-------------|----------|
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | 2 | üî¥ –ö—Ä–∏—Ç–∏—á–Ω–∞—è | –ü–∏—à–µ—Ç—Å—è –≤ —Ñ–∞–π–ª—ã –ª–æ–≥–æ–≤ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ |
| –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω—É | 2 | üü† –í—ã—Å–æ–∫–∞—è | –•—Ä–∞–Ω–∏—Ç—Å—è –≤ Telegram –ø–µ—Ä–µ–ø–∏—Å–∫–µ |
| FSM State | 2 | üü° –°—Ä–µ–¥–Ω—è—è | –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Redis |
| –ú–æ–¥–µ–ª–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ | 5 | üü° –°—Ä–µ–¥–Ω—è—è | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö |
| UI/–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ | 4 | üü¢ –ù–∏–∑–∫–∞—è | PDF, —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é |
| –ê—Ä—Ö–∏–≤–Ω—ã–µ —Ñ–∞–π–ª—ã | 16 | ‚ö™ –ù–µ —Ç—Ä–æ–≥–∞–µ–º | –£–∂–µ –≤ –∞—Ä—Ö–∏–≤–µ |

**–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ —Å–º. –≤ [–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ A](#–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ-a-–ø–æ–ª–Ω—ã–π-—Å–ø–∏—Å–æ–∫-—Ñ–∞–π–ª–æ–≤)**

---

## üóëÔ∏è –ß—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ

### –ò–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
- ‚ùå `Profile.first_name`
- ‚ùå `Profile.username`
- ‚ùå `Profile.last_name` (–µ—Å–ª–∏ –µ—Å—Ç—å)

### –ò–∑ –∫–æ–¥–∞:
- ‚ùå –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `user.username`
- ‚ùå –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `user.first_name`
- ‚ùå –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `user.last_name`
- ‚ùå –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `profile.username`
- ‚ùå –í—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ `profile.first_name`
- ‚ùå Property `profile.full_name` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PII)

### –ò–∑ –ª–æ–≥–æ–≤:
- ‚ùå Username –≤ `logging_middleware.py`
- ‚ùå Username –≤ `activity_tracker.py`
- ‚ùå Username –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö –∞–¥–º–∏–Ω—É

### –ò–∑ FSM State:
- ‚ùå `pending_profile_data['username']`
- ‚ùå `pending_profile_data['first_name']`
- ‚ùå `pending_profile_data['last_name']`

### –ß—Ç–æ –æ—Å—Ç–∞–µ—Ç—Å—è:
- ‚úÖ `telegram_id` (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
- ‚úÖ `language_code` (–¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏)
- ‚úÖ –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è Profile (–ø–æ–¥–ø–∏—Å–∫–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ —Ç.–¥.)

---

## üöÄ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### **–®–ê–ì 0: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** ‚è±Ô∏è 1-2 —á–∞—Å–∞

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

#### 0.1. –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ PII –≤ –∫–æ–¥–µ

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `check_pii.py` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```python
#!/usr/bin/env python3
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–æ–∏—Å–∫–∞ PII (username, first_name, last_name) –≤ –∫–æ–¥–µ
"""
import os
import re
from pathlib import Path

# –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –ø–æ–∏—Å–∫–∞
PII_PATTERNS = [
    r'\.username\b',
    r'\.first_name\b',
    r'\.last_name\b',
    r'\.full_name\b',
    r'\["username"\]',
    r'\["first_name"\]',
    r'\["last_name"\]',
    r'username\s*=',
    r'first_name\s*=',
    r'last_name\s*=',
]

# –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è
EXCLUDE_DIRS = {
    'venv', '.git', '__pycache__', 'archive', 'archive_20251102',
    'archive_20251105', 'archive_20251109', 'archive_20251110',
    'node_modules', '.pytest_cache', 'staticfiles'
}

# –§–∞–π–ª—ã –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è
EXCLUDE_FILES = {
    'check_pii.py',  # –°–∞–º —Å–∫—Ä–∏–ø—Ç
    'PII_REMOVAL_PLAN.md',  # –≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç
}

def check_file(file_path: Path) -> list:
    """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª –Ω–∞ –Ω–∞–ª–∏—á–∏–µ PII –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤"""
    matches = []

    try:
        with open(file_path, 'r', encoding='utf-8') as f:
            for line_num, line in enumerate(f, 1):
                for pattern in PII_PATTERNS:
                    if re.search(pattern, line, re.IGNORECASE):
                        matches.append({
                            'file': str(file_path),
                            'line': line_num,
                            'content': line.strip(),
                            'pattern': pattern
                        })
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ {file_path}: {e}")

    return matches

def scan_project(root_dir: str = '.'):
    """–°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç"""
    root = Path(root_dir)
    all_matches = []

    for file_path in root.rglob('*.py'):
        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∏—Å–∫–ª—é—á–µ–Ω–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
        if any(excluded in file_path.parts for excluded in EXCLUDE_DIRS):
            continue

        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∏—Å–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
        if file_path.name in EXCLUDE_FILES:
            continue

        matches = check_file(file_path)
        if matches:
            all_matches.extend(matches)

    return all_matches

def generate_report(matches: list) -> str:
    """–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç"""
    if not matches:
        return "‚úÖ PII –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ –∫–æ–¥–µ!"

    # –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ñ–∞–π–ª–∞–º
    by_file = {}
    for match in matches:
        file = match['file']
        if file not in by_file:
            by_file[file] = []
        by_file[file].append(match)

    report = f"üîç –ù–∞–π–¥–µ–Ω–æ PII –≤ {len(by_file)} —Ñ–∞–π–ª–∞—Ö:\n\n"

    for file, file_matches in sorted(by_file.items()):
        report += f"\nüìÑ {file} ({len(file_matches)} —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π):\n"
        for match in file_matches:
            report += f"   –°—Ç—Ä–æ–∫–∞ {match['line']}: {match['content'][:80]}\n"

    report += f"\nüìä –í—Å–µ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π: {len(matches)}\n"

    return report

if __name__ == '__main__':
    print("üîç –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ PII...\n")
    matches = scan_project()
    report = generate_report(matches)
    print(report)

    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ—Ç—á–µ—Ç
    with open('pii_scan_report.txt', 'w', encoding='utf-8') as f:
        f.write(report)

    print(f"\nüìù –û—Ç—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ pii_scan_report.txt")

    # Exit –∫–æ–¥ –¥–ª—è CI/CD
    exit(0 if not matches else 1)
```

#### 0.2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä–≤–∏—á–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
python check_pii.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –§–∞–π–ª `pii_scan_report.txt` —Å –ø–æ–ª–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –º–µ—Å—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è PII

#### 0.3. –°–æ–∑–¥–∞—Ç—å baseline –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

```bash
# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
cp pii_scan_report.txt pii_scan_baseline.txt

# –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞–ø—É—Å–∫–∞—Ç—å:
python check_pii.py
diff pii_scan_baseline.txt pii_scan_report.txt
```

---

### **–®–ê–ì 1: –ê–Ω–∞–ª–∏–∑ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚è±Ô∏è 1 —á–∞—Å

**–¶–µ–ª—å:** –ü–æ–ª–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è PII –ø–æ–ª–µ–π

#### 1.1. –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –º–æ–¥–µ–ª—è—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ property –∏ –º–µ—Ç–æ–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ PII
grep -n "self.username\|self.first_name\|self.last_name\|self.full_name" database/models.py expenses/models.py
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∑–∞–Ω–µ—Å—Ç–∏ –≤ —Ç–∞–±–ª–∏—Ü—É:**

| –§–∞–π–ª | –°—Ç—Ä–æ–∫–∞ | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –ó–∞–º–µ–Ω–∞ |
|------|--------|---------------|--------|
| database/models.py | 50 | `__str__` –º–µ—Ç–æ–¥ | `return f"User {self.telegram_id}"` |
| ... | ... | ... | ... |

#### 1.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ Django admin

```bash
# –ù–∞–π—Ç–∏ –≤—Å–µ –º–µ—Å—Ç–∞ –≤ admin.py –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ PII
grep -rn "username\|first_name\|last_name" expenses/admin.py admin_panel/
```

#### 1.3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ serializers (–µ—Å–ª–∏ –µ—Å—Ç—å)

```bash
find . -name "serializers.py" -exec grep -Hn "username\|first_name" {} \;
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å –ø–ª–∞–Ω–æ–º –∑–∞–º–µ–Ω—ã

---

### **–®–ê–ì 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ fallback –¥–ª—è FSM states** ‚è±Ô∏è 30 –º–∏–Ω—É—Ç

**üî¥ –ö–†–ò–¢–ò–ß–ù–û:** –í—ã–ø–æ–ª–Ω–∏—Ç—å –î–û –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞!

**–¶–µ–ª—å:** –û–±–µ—Å–ø–µ—á–∏—Ç—å graceful degradation –¥–ª—è —Å—Ç–∞—Ä—ã—Ö FSM states —Å–æ–¥–µ—Ä–∂–∞—â–∏—Ö PII

#### 2.1. –î–æ–±–∞–≤–∏—Ç—å fallback –≤ `privacy_check.py`

```python
# bot/middlewares/privacy_check.py

# –°—Ç–∞—Ä—ã–π –∫–æ–¥ (—Å—Ç—Ä–æ–∫–∞ ~98):
await state.update_data(
    pending_profile_data={
        'telegram_id': user.id,
        'language_code': display_lang,
        'raw_language_code': user.language_code,
        'username': user.username,      # ‚ùå
        'first_name': user.first_name,  # ‚ùå
        'last_name': user.last_name,    # ‚ùå
    }
)

# –ù–æ–≤—ã–π –∫–æ–¥ —Å fallback:
await state.update_data(
    pending_profile_data={
        'telegram_id': user.id,
        'language_code': display_lang,
        'raw_language_code': user.language_code,
        # username, first_name, last_name –£–î–ê–õ–ï–ù–´ –¥–ª—è privacy
    }
)

# –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö states:
async def _get_pending_data_safe(state: FSMContext) -> dict:
    """–ë–µ–∑–æ–ø–∞—Å–Ω–æ –ø–æ–ª—É—á–∏—Ç—å pending_profile_data, —É–¥–∞–ª–∏–≤ PII –∏–∑ —Å—Ç–∞—Ä—ã—Ö states"""
    data = await state.get_data()
    pending = data.get('pending_profile_data', {})

    # –£–¥–∞–ª–∏—Ç—å PII –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å (–¥–ª—è —Å—Ç–∞—Ä—ã—Ö states)
    pending.pop('username', None)
    pending.pop('first_name', None)
    pending.pop('last_name', None)

    return pending
```

#### 2.2. –î–æ–±–∞–≤–∏—Ç—å fallback –≤ `start.py`

–ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `bot/routers/start.py` (—Å—Ç—Ä–æ–∫–∞ ~235)

#### 2.3. –î–æ–±–∞–≤–∏—Ç—å middleware –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö states

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `bot/middlewares/fsm_cleanup.py`:

```python
"""
Middleware –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ PII –∏–∑ —Å—Ç–∞—Ä—ã—Ö FSM states
–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
"""
from aiogram import BaseMiddleware
from aiogram.types import Update
from aiogram.fsm.context import FSMContext
from typing import Callable, Dict, Any, Awaitable
import logging

logger = logging.getLogger(__name__)

class FSMCleanupMiddleware(BaseMiddleware):
    """–£–¥–∞–ª—è–µ—Ç PII –∏–∑ FSM state –µ—Å–ª–∏ –æ–Ω–∏ —Ç–∞–º –µ—Å—Ç—å"""

    def __init__(self):
        self.cleaned_users = set()  # –ö–µ—à –æ—á–∏—â–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

    async def __call__(
        self,
        handler: Callable[[Update, Dict[str, Any]], Awaitable[Any]],
        event: Update,
        data: Dict[str, Any]
    ) -> Any:
        state: FSMContext = data.get('state')

        if state:
            user_id = None
            if event.message:
                user_id = event.message.from_user.id
            elif event.callback_query:
                user_id = event.callback_query.from_user.id

            # –û—á–∏—â–∞–µ–º —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            if user_id and user_id not in self.cleaned_users:
                await self._cleanup_pii(state, user_id)
                self.cleaned_users.add(user_id)

        return await handler(event, data)

    async def _cleanup_pii(self, state: FSMContext, user_id: int):
        """–£–¥–∞–ª–∏—Ç—å PII –∏–∑ state –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å"""
        try:
            data = await state.get_data()

            if 'pending_profile_data' in data:
                pending = data['pending_profile_data']

                # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ PII
                has_pii = any(key in pending for key in ['username', 'first_name', 'last_name'])

                if has_pii:
                    logger.warning(f"Found PII in FSM state for user {user_id}, cleaning...")

                    # –£–¥–∞–ª–∏—Ç—å PII
                    pending.pop('username', None)
                    pending.pop('first_name', None)
                    pending.pop('last_name', None)

                    # –û–±–Ω–æ–≤–∏—Ç—å state
                    await state.update_data(pending_profile_data=pending)

                    logger.info(f"PII cleaned from FSM state for user {user_id}")

        except Exception as e:
            logger.error(f"Error cleaning FSM state for user {user_id}: {e}")
```

#### 2.4. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å middleware –≤ bot.py

```python
# bot/bot.py –∏–ª–∏ main.py

from bot.middlewares.fsm_cleanup import FSMCleanupMiddleware

# –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ –¥—Ä—É–≥–∏—Ö middlewares:
dp.update.middleware(FSMCleanupMiddleware())
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°—Ç–∞—Ä—ã–µ FSM states –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç –æ—à–∏–±–æ–∫
- ‚úÖ PII –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

---

### **–®–ê–ì 3: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** ‚è±Ô∏è 3-4 —á–∞—Å–∞

**–¶–µ–ª—å:** –£–±—Ä–∞—Ç—å –≤—Å–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ PII –ø–æ–ª—è–º –∏–∑ –∫–æ–¥–∞

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É):**

#### 3.1. üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)

##### `bot/middlewares/logging_middleware.py`

```python
# –°—Ç—Ä–æ–∫–∞ 62 - –£–î–ê–õ–ò–¢–¨:
'username': user.username if user else None,  # ‚ùå –£–î–ê–õ–ò–¢–¨ –≠–¢–£ –°–¢–†–û–ö–£

# –†–µ–∑—É–ª—å—Ç–∞—Ç (—Å—Ç—Ä–æ–∫–∏ 58-65):
log_data = {
    'request_id': self.request_count,
    'timestamp': datetime.now().isoformat(),
    'user_id': user.id if user else None,
    # 'username': –£–î–ê–õ–ï–ù–û –¥–ª—è privacy
    'chat_id': chat.id if chat else None,
    'chat_type': chat.type if chat else None,
}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** `python check_pii.py` - —Å—Ç—Ä–æ–∫–∞ –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å –∏–∑ –æ—Ç—á–µ—Ç–∞

##### `bot/middleware/activity_tracker.py`

```python
# –°—Ç—Ä–æ–∫–∞ 56 - –ò–ó–ú–ï–ù–ò–¢–¨:
# –ë—ã–ª–æ:
await self._track_user_activity(user.id, user.username or user.first_name)

# –°—Ç–∞–ª–æ:
await self._track_user_activity(user.id)

# –°—Ç—Ä–æ–∫–∞ 77, 92, 95 - –∏–∑–º–µ–Ω–∏—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—É –º–µ—Ç–æ–¥–∞:
async def _track_user_activity(self, user_id: int):  # –£–±—Ä–∞—Ç—å username –ø–∞—Ä–∞–º–µ—Ç—Ä
    """Track user activity in Redis"""
    # ... –∫–æ–¥ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è username

# –°—Ç—Ä–æ–∫–∞ 104 - –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É:
# –ë—ã–ª–æ:
f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: {username} \\(ID: `{user_id}`\\)\n"

# –°—Ç–∞–ª–æ:
f"User ID: `{user_id}`\n"
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ó–∞–ø—É—Å—Ç–∏—Ç—å `python check_pii.py`

#### 3.2. üü† –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω—É

##### `bot/services/admin_notifier.py`

```python
# –°—Ç—Ä–æ–∫–∞ 270 - –∏–∑–º–µ–Ω–∏—Ç—å —Å–∏–≥–Ω–∞—Ç—É—Ä—É:
# –ë—ã–ª–æ:
async def notify_new_user(user_id: int, username: Optional[str] = None, first_name: Optional[str] = None):

# –°—Ç–∞–ª–æ:
async def notify_new_user(user_id: int):

# –°—Ç—Ä–æ–∫–∏ 284-288 - –£–î–ê–õ–ò–¢–¨ –±–ª–æ–∫–∏ —Å PII:
# –£–î–ê–õ–ò–¢–¨:
if first_name:
    message += f"–ò–º—è: {escape_markdown_v2(first_name)}\n"

if username:
    message += f"Username: @{escape_markdown_v2(username)}\n"

# –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ:
message = (
    f"üéâ *–ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å\\!*\n\n"
    f"ID: `{user_id}`\n"
    f"–í—Ä–µ–º—è: {escape_markdown_v2(datetime.now().strftime('%Y-%m-%d %H:%M:%S'))}"
)
```

**–í–∞–∂–Ω–æ:** –ù–∞–π—Ç–∏ –≤—Å–µ –≤—ã–∑–æ–≤—ã `notify_new_user()` –∏ —É–±—Ä–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É username/first_name:

```bash
grep -rn "notify_new_user" bot/ --include="*.py"
```

#### 3.3. üü° FSM State (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ –≤ –®–∞–≥–µ 2)

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ –®–∞–≥–∞ 2 —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

#### 3.4. üü¢ UI/–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

##### `bot/services/pdf_report_html.py`

```python
# –°—Ç—Ä–æ–∫–∞ 186 - –∑–∞–º–µ–Ω–∏—Ç—å:
# –ë—ã–ª–æ:
'user_name': profile.full_name or f"@{profile.username}" if profile.username else "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å",

# –°—Ç–∞–ª–æ:
'user_name': f"User {profile.telegram_id}",
```

##### –î—Ä—É–≥–∏–µ –º–µ—Å—Ç–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

–ù–∞–π—Ç–∏ –≤—Å–µ –º–µ—Å—Ç–∞ –≥–¥–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è username –≤ UI:

```bash
grep -rn "\.username\|\.first_name" bot/routers/ bot/keyboards.py --include="*.py"
```

–ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞:
- `f"User {telegram_id}"` –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π
- –£–±—Ä–∞—Ç—å –≤–æ–æ–±—â–µ, –µ—Å–ª–∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ

#### 3.5. üîµ Household/Family/Referral

##### `bot/routers/household.py`, `bot/services/household.py`

–ù–∞–π—Ç–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–º–µ–Ω —á–ª–µ–Ω–æ–≤ —Å–µ–º—å–∏:

```bash
grep -n "username\|first_name" bot/routers/household.py bot/services/household.py
```

–ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞:
- "–ß–ª–µ–Ω —Å–µ–º—å–∏" –∏–ª–∏ "Family Member"
- `f"User {telegram_id}"` –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä

##### `bot/routers/referral.py`, `bot/services/affiliate.py`

–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤:
- "–†–µ—Ñ–µ—Ä–∞–ª #1", "–†–µ—Ñ–µ—Ä–∞–ª #2" –∏ —Ç.–¥.
- –ò–ª–∏ `f"User {telegram_id}"`

#### 3.6. üìã Django Admin

##### `expenses/admin.py`

```python
# –ò–∑–º–µ–Ω–∏—Ç—å –∫–ª–∞—Å—Å ProfileAdmin:

class ProfileAdmin(admin.ModelAdmin):
    list_display = [
        'telegram_id',          # ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å
        # 'username',           # ‚ùå –£–î–ê–õ–ò–¢–¨
        # 'first_name',         # ‚ùå –£–î–ê–õ–ò–¢–¨
        'subscription_end_date',
        'is_beta_tester',
        'last_activity',
        'is_active',
    ]

    search_fields = [
        'telegram_id',          # ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å
        # 'username',           # ‚ùå –£–î–ê–õ–ò–¢–¨
        # 'first_name',         # ‚ùå –£–î–ê–õ–ò–¢–¨
    ]

    list_filter = [
        'is_beta_tester',
        'is_active',
        'locale',
    ]
```

#### 3.7. üîç –í—Å–µ –º–µ—Å—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è Profile

–ù–∞–π—Ç–∏ –≤—Å–µ `Profile.objects.create()`:

```bash
grep -rn "Profile\.objects\.create\|profile\.save()" bot/ --include="*.py"
```

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∂–¥–æ–µ –º–µ—Å—Ç–æ –∏ —É–±—Ä–∞—Ç—å –ø–µ—Ä–µ–¥–∞—á—É PII:

```python
# –ë—ã–ª–æ:
Profile.objects.create(
    telegram_id=user_id,
    username=username,      # ‚ùå –£–î–ê–õ–ò–¢–¨
    first_name=first_name,  # ‚ùå –£–î–ê–õ–ò–¢–¨
    ...
)

# –°—Ç–∞–ª–æ:
Profile.objects.create(
    telegram_id=user_id,
    # username, first_name - –£–î–ê–õ–ï–ù–´
    ...
)
```

**–ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥—à–∞–≥–∞:**
```bash
python check_pii.py
git diff pii_scan_baseline.txt pii_scan_report.txt
```

---

### **–®–ê–ì 4: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ Profile** ‚è±Ô∏è 30 –º–∏–Ω—É—Ç

**–¶–µ–ª—å:** –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—è –∏–∑ –º–æ–¥–µ–ª–∏ Django

#### 4.1. –ò–∑–º–µ–Ω–∏—Ç—å `database/models.py`

```python
class Profile(models.Model):
    """–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram"""
    telegram_id = models.BigIntegerField(unique=True, primary_key=True)
    # first_name = models.CharField(max_length=100)  # ‚ùå –£–î–ê–õ–ï–ù–û –¥–ª—è privacy
    # username = models.CharField(max_length=100, null=True, blank=True)  # ‚ùå –£–î–ê–õ–ï–ù–û –¥–ª—è privacy

    # –ü–æ–¥–ø–∏—Å–∫–∞ –∏ –¥–æ—Å—Ç—É–ø
    subscription_end_date = models.DateTimeField(null=True, blank=True)
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

    def __str__(self):
        # –ë—ã–ª–æ: return f"{self.first_name} (@{self.username or 'no_username'})"
        return f"User {self.telegram_id}"  # ‚úÖ –ù–û–í–û–ï
```

#### 4.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å property –º–µ—Ç–æ–¥—ã

–ï—Å–ª–∏ –µ—Å—Ç—å `full_name` –∏–ª–∏ –¥—Ä—É–≥–∏–µ property –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ PII - —É–¥–∞–ª–∏—Ç—å:

```python
# –ï—Å–ª–∏ –±—ã–ª–æ:
@property
def full_name(self):
    return f"{self.first_name} {self.last_name or ''}".strip()

# –£–î–ê–õ–ò–¢–¨ –≤–µ—Å—å property!
```

#### 4.3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏

```bash
grep -rn "profile\.username\|profile\.first_name" database/models.py expenses/models.py
```

---

### **–®–ê–ì 5: –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ Django** ‚è±Ô∏è 15 –º–∏–Ω—É—Ç

#### 5.1. –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

```bash
python manage.py makemigrations --name remove_pii_fields
```

#### 5.2. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é

```bash
# –ù–∞–π—Ç–∏ –Ω–æ–º–µ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏
ls -la expenses/migrations/ | grep remove_pii

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
cat expenses/migrations/XXXX_remove_pii_fields.py
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ:

```python
from django.db import migrations

class Migration(migrations.Migration):

    dependencies = [
        ('expenses', 'XXXX_previous_migration'),
    ]

    operations = [
        migrations.RemoveField(
            model_name='profile',
            name='first_name',
        ),
        migrations.RemoveField(
            model_name='profile',
            name='username',
        ),
    ]
```

#### 5.3. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å SQL (–¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)

```bash
python manage.py sqlmigrate expenses XXXX
```

–í—ã–≤–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ:

```sql
BEGIN;
--
-- Remove field first_name from profile
--
ALTER TABLE "profiles" DROP COLUMN "first_name" CASCADE;
--
-- Remove field username from profile
--
ALTER TABLE "profiles" DROP COLUMN "username" CASCADE;
COMMIT;
```

#### 5.4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
python manage.py migrate --plan
```

---

### **–®–ê–ì 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ** ‚è±Ô∏è 1-2 —á–∞—Å–∞

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ PII –ø–æ–ª–µ–π

#### 6.1. –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
python check_pii.py

# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏:
# ‚úÖ PII –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ –∫–æ–¥–µ!

# –ï—Å–ª–∏ –µ—Å—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∏—Ö!
```

#### 6.2. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–∏–Ω—Ç–µ—Ä—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)

```bash
# Flake8
flake8 bot/ database/ expenses/

# Mypy (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
mypy bot/ database/ expenses/

# Pytest
pytest tests/ -v
```

#### 6.3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ª–æ–∫–∞–ª—å–Ω–æ

```bash
python manage.py migrate
```

#### 6.4. –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°—Ü–µ–Ω–∞—Ä–∏–∏:**

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - `/start` ‚Üí –ø—Ä–∏–Ω—è—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø—Ä–æ—Ñ–∏–ª—å —Å–æ–∑–¥–∞–µ—Ç—Å—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `tail -f logs/django.log | grep -v username`

2. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞—Ç:**
   - –°–æ–∑–¥–∞—Ç—å 3-5 —Ç—Ä–∞—Ç —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ PII

3. **PDF –æ—Ç—á–µ—Ç—ã:**
   - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–Ω–µ–≤–Ω–æ–π –æ—Ç—á–µ—Ç
   - –û—Ç–∫—Ä—ã—Ç—å PDF - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤–º–µ—Å—Ç–æ –∏–º–µ–Ω–∏ "User {telegram_id}"

4. **Django Admin:**
   - –ó–∞–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É: http://localhost:8000/admin/
   - –ü–µ—Ä–µ–π—Ç–∏ –≤ Profiles
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–ø–∏—Å–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ –ø–æ telegram_id

5. **–°—Ç–∞—Ä—ã–µ FSM states (–≤–∞–∂–Ω–æ!):**
   - –ï—Å–ª–∏ –µ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤–∞—è –ë–î —Å–æ —Å—Ç–∞—Ä—ã–º–∏ states:
     - –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –±–æ—Ç–æ–º
     - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫
     - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ warnings –æ –æ—á–∏—Å—Ç–∫–µ PII

6. **–°–µ–º–µ–π–Ω—ã–π –±—é–¥–∂–µ—Ç / –†–µ—Ñ–µ—Ä–∞–ª—ã (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
   - –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ AttributeError

**Checklist —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

- [ ] –ù–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] PDF –æ—Ç—á–µ—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è
- [ ] Django admin —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–æ–∏—Å–∫ –ø–æ telegram_id —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
- [ ] `python check_pii.py` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 0 —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
- [ ] –í—Å–µ —Ç–µ—Å—Ç—ã pytest –ø—Ä–æ—Ö–æ–¥—è—Ç

---

### **–®–ê–ì 7: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é** ‚è±Ô∏è 30 –º–∏–Ω—É—Ç

#### 7.1. –°–æ–∑–¥–∞—Ç—å backup –ë–î –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
ssh batman@94.198.220.155

# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –±—ç–∫–∞–ø–æ–≤ –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
mkdir -p /home/batman/backups/

# –°–æ–∑–¥–∞—Ç—å backup
docker exec expense_bot_db pg_dump -U expense_user expense_bot > \
    /home/batman/backups/before_pii_removal_$(date +%Y%m%d_%H%M%S).sql

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä
ls -lh /home/batman/backups/before_pii_removal_*.sql

# –î–æ–ª–∂–µ–Ω –±—ã—Ç—å > 0, –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ MB
```

#### 7.2. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å backup –ª–æ–∫–∞–ª—å–Ω–æ (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

```bash
# –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ
scp batman@94.198.220.155:/home/batman/backups/before_pii_removal_*.sql ./backups/
```

#### 7.3. –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
git status

# –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git add bot/ database/ expenses/ docs/ check_pii.py

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è
git diff --cached

# –°–æ–∑–¥–∞—Ç—å –∫–æ–º–º–∏—Ç
git commit -m "Privacy: Remove PII fields (username, first_name, last_name)

- Removed username, first_name, last_name from Profile model
- Updated all code to use only telegram_id for identification
- Added FSM cleanup middleware for old states
- Updated logging to exclude PII
- Updated admin notifications to show only user_id
- Updated PDF reports to display 'User {telegram_id}'
- Added automated PII detection script (check_pii.py)

BREAKING CHANGE: Profile model no longer has username/first_name fields
Migration: expenses/XXXX_remove_pii_fields.py

Refs: GDPR compliance, privacy by design"

# Push –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git push origin master
```

#### 7.4. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `docs/PII_REMOVAL_ROLLBACK.md`:

```markdown
# –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞ —É–¥–∞–ª–µ–Ω–∏—è PII

## –í —Å–ª—É—á–∞–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

### 1. –û—Ç–∫–∞—Ç –∫–æ–¥–∞
\`\`\`bash
ssh batman@94.198.220.155
cd /home/batman/expense_bot
git fetch origin
git reset --hard <commit_hash_before_pii_removal>
\`\`\`

### 2. –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
\`\`\`bash
# –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ Django
docker-compose run --rm web python manage.py migrate expenses XXXX_previous_migration

# –ò–ª–∏ –ø–æ–ª–Ω—ã–π –æ—Ç–∫–∞—Ç –ë–î –∏–∑ backup
docker exec -i expense_bot_db psql -U expense_user expense_bot < \
    /home/batman/backups/before_pii_removal_YYYYMMDD_HHMMSS.sql
\`\`\`

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
\`\`\`bash
docker-compose restart
\`\`\`

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞
\`\`\`bash
docker-compose logs --tail=100 bot
docker-compose ps
\`\`\`
```

---

### **–®–ê–ì 8: –î–µ–ø–ª–æ–π –Ω–∞ production** ‚è±Ô∏è 30 –º–∏–Ω—É—Ç

**‚ö†Ô∏è –õ—É—á—à–µ–µ –≤—Ä–µ–º—è:** –í –ø–µ—Ä–∏–æ–¥ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 3-4 —á–∞—Å–∞ –Ω–æ—á–∏ MSK)

#### 8.1. –£–≤–µ–¥–æ–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ –µ—Å—Ç—å –∫–∞–Ω–∞–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
```
"‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
–°–µ–≥–æ–¥–Ω—è –≤ 03:00-03:30 –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã.
–í–æ–∑–º–æ–∂–Ω—ã –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ —Ä–∞–±–æ—Ç–µ –±–æ—Ç–∞."
```

#### 8.2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh batman@94.198.220.155
cd /home/batman/expense_bot
```

#### 8.3. –§–∏–Ω–∞–ª—å–Ω—ã–π backup (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)

```bash
docker exec expense_bot_db pg_dump -U expense_user expense_bot > \
    /home/batman/backups/final_before_pii_removal_$(date +%Y%m%d_%H%M%S).sql
```

#### 8.4. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
docker-compose down
```

#### 8.5. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥

```bash
git fetch origin
git reset --hard origin/master
git pull origin master
```

#### 8.6. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
docker-compose run --rm web python manage.py migrate

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: "Applying expenses.XXXX_remove_pii_fields... OK"
```

#### 8.7. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
docker-compose up -d
```

#### 8.8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

```bash
# –õ–æ–≥–∏ –±–æ—Ç–∞
docker-compose logs --tail=100 bot

# –õ–æ–≥–∏ –≤–µ–±
docker-compose logs --tail=100 web

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –æ—à–∏–±–∫–∏
docker-compose logs --tail=200 bot | grep -i error
docker-compose logs --tail=200 web | grep -i error
```

#### 8.9. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å

```bash
docker-compose ps

# –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å "Up"
```

---

### **–®–ê–ì 9: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è** ‚è±Ô∏è 30 –º–∏–Ω—É—Ç

#### 9.1. –ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
# –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
docker-compose logs --tail=500 bot | grep -i "error\|exception\|traceback" | wc -l
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å 0 –∏–ª–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ

# –ë–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã
# –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤ Telegram: /start
```

#### 9.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ PII –≤ –ª–æ–≥–∞—Ö

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ username –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
docker-compose logs --tail=1000 bot | grep "username"
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –ü–£–°–¢–û –∏–ª–∏ —Ç–æ–ª—å–∫–æ –≤ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–∞—Ö

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–µ–¥–∞–≤–Ω–∏–µ –ª–æ–≥–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 –∑–∞–ø–∏—Å–µ–π)
docker-compose logs --tail=50 bot | grep "user_id"
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ telegram_id, –±–µ–∑ username
```

#### 9.3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

**–í Telegram –±–æ—Ç–µ:**

1. ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞—Ç—ã
3. ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–∞
4. ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
5. ‚úÖ –ö–æ–º–∞–Ω–¥—ã /start, /help, /expenses

#### 9.4. Django Admin

```bash
# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
https://expensebot.duckdns.org/admin/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
- ‚úÖ –°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ñ–∏–ª–µ–π –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ telegram_id —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è
```

#### 9.5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å rate limiter stats –≤ –ª–æ–≥–∞—Ö
docker-compose logs --tail=200 bot | grep "Rate limiter stats"

# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
# –ù–∞–ø—Ä–∏–º–µ—Ä: "Rate limiter stats: requests=54, blocked=0, unique_users=5"
```

#### 9.6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ–ª—è —É–¥–∞–ª–µ–Ω—ã
docker exec -it expense_bot_db psql -U expense_user -d expense_bot -c "\d profiles"

# –í —Å–ø–∏—Å–∫–µ –∫–æ–ª–æ–Ω–æ–∫ –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# - username
# - first_name
# - last_name
```

---

### **–®–ê–ì 10: –û—á–∏—Å—Ç–∫–∞ –∏ —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è** ‚è±Ô∏è 30 –º–∏–Ω—É—Ç

#### 10.1. –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ —Å PII (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**‚ö†Ô∏è –û—Å—Ç–æ—Ä–æ–∂–Ω–æ:** –£–¥–∞–ª—è–µ—Ç –ª–æ–≥–∏ –±–µ–∑–≤–æ–∑–≤—Ä–∞—Ç–Ω–æ!

```bash
# –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏
ssh batman@94.198.220.155
cd /home/batman/expense_bot

# –°–æ–∑–¥–∞—Ç—å –∞—Ä—Ö–∏–≤
mkdir -p /home/batman/archive_logs_$(date +%Y%m%d)
mv logs/*.log /home/batman/archive_logs_$(date +%Y%m%d)/

# –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ (–µ—Å–ª–∏ –æ–Ω–∏ –±–æ–ª—å—à–∏–µ)
# rm logs/django_*.log

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —á–∏—Å—Ç—ã—Ö –ª–æ–≥–æ–≤
docker-compose restart bot web
```

#### 10.2. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

**–§–∞–π–ª `CLAUDE.md` - –¥–æ–±–∞–≤–∏—Ç—å:**

```markdown
## Privacy & GDPR

### PII (Personally Identifiable Information)

**–í–ê–ñ–ù–û:** –í –ø—Ä–æ–µ–∫—Ç–µ –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏ –ù–ï —Ö—Ä–∞–Ω—è—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
- ‚ùå `username` (Telegram username)
- ‚ùå `first_name` (–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- ‚ùå `last_name` (–§–∞–º–∏–ª–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û:**
- ‚úÖ `telegram_id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –ª–æ–≥–∏ —Å–æ–¥–µ—Ä–∂–∞—Ç –¢–û–õ–¨–ö–û `telegram_id` –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
Username –∏ –¥—Ä—É–≥–∏–µ PII –ù–ò–ö–û–ì–î–ê –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è.

**–ü—Ä–∏–º–µ—Ä –ª–æ–≥–∞:**
\`\`\`json
{
  "user_id": 123456789,
  "message_type": "text",
  "timestamp": "2025-11-11T20:00:00"
}
\`\`\`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ PII

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ PII:
\`\`\`bash
python check_pii.py
\`\`\`

–°–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å: ‚úÖ PII –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ –∫–æ–¥–µ!
```

#### 10.3. –û–±–Ω–æ–≤–∏—Ç—å README (–µ—Å–ª–∏ –µ—Å—Ç—å —É–ø–æ–º–∏–Ω–∞–Ω–∏—è PII)

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –ª—é–±—ã–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è username –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:

```bash
grep -r "username" README.md docs/ --include="*.md" | grep -v "PII_REMOVAL"
```

#### 10.4. –î–æ–±–∞–≤–∏—Ç—å –≤ CI/CD –ø—Ä–æ–≤–µ—Ä–∫—É PII (–±—É–¥—É—â–µ–µ)

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.github/workflows/pii-check.yml` (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è GitHub Actions):

```yaml
name: PII Detection

on: [push, pull_request]

jobs:
  check-pii:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.11'
      - name: Check for PII in code
        run: |
          python check_pii.py
          if [ $? -ne 0 ]; then
            echo "‚ùå PII detected in code!"
            exit 1
          fi
          echo "‚úÖ No PII found"
```

#### 10.5. –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `docs/PII_REMOVAL_COMPLETION_REPORT.md`:

```markdown
# –û—Ç—á–µ—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è PII

**–î–∞—Ç–∞:** 2025-11-11
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã

- ‚úÖ –£–¥–∞–ª–µ–Ω—ã –ø–æ–ª—è username, first_name, last_name –∏–∑ –º–æ–¥–µ–ª–∏ Profile
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ 31 —Ñ–∞–π–ª —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PII
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω FSM cleanup middleware
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (—Ç–æ–ª—å–∫–æ telegram_id)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω—É
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω Django admin
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ (check_pii.py)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–π–¥–µ–Ω–æ
- ‚úÖ –î–µ–ø–ª–æ–π –Ω–∞ production –≤—ã–ø–æ–ª–Ω–µ–Ω

## –ú–µ—Ç—Ä–∏–∫–∏

- –§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ: 31
- –°—Ç—Ä–æ–∫ —É–¥–∞–ª–µ–Ω–æ: ~150
- –ü–æ–ª—è –ë–î —É–¥–∞–ª–µ–Ω—ã: 2 (username, first_name)
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: X —á–∞—Å–æ–≤

## –ü—Ä–æ–≤–µ—Ä–∫–∞

\`\`\`bash
python check_pii.py
# –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ PII –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ –∫–æ–¥–µ!
\`\`\`

## Backup

Backup –ë–î —Å–æ–∑–¥–∞–Ω: `/home/batman/backups/before_pii_removal_YYYYMMDD_HHMMSS.sql`

## –ü—Ä–æ–±–ª–µ–º—ã

–ù–µ—Ç. –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —à—Ç–∞—Ç–Ω–æ.
```

---

## üîç –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

### –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ PII –≤ –∫–æ–¥–µ

**–§–∞–π–ª:** `check_pii.py` (—Å–æ–∑–¥–∞–Ω –≤ –®–∞–≥–µ 0)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```bash
# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏
python check_pii.py

# –í—ã–≤–æ–¥ –µ—Å–ª–∏ PII –Ω–∞–π–¥–µ–Ω–æ:
üîç –ù–∞–π–¥–µ–Ω–æ PII –≤ 5 —Ñ–∞–π–ª–∞—Ö:

üìÑ bot/middlewares/logging_middleware.py (2 —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è):
   –°—Ç—Ä–æ–∫–∞ 62: 'username': user.username if user else None,
   –°—Ç—Ä–æ–∫–∞ 121: logger.info(f"Request: {json.dumps(log_data)}")

üìä –í—Å–µ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π: 10

# –í—ã–≤–æ–¥ –µ—Å–ª–∏ PII –ù–ï –Ω–∞–π–¥–µ–Ω–æ:
‚úÖ PII –Ω–µ –Ω–∞–π–¥–µ–Ω–æ –≤ –∫–æ–¥–µ!
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É

**Pre-commit hook** (`.git/hooks/pre-commit`):

```bash
#!/bin/bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ PII –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

python check_pii.py
if [ $? -ne 0 ]; then
    echo ""
    echo "‚ùå COMMIT BLOCKED: PII detected in code!"
    echo "Please remove username/first_name/last_name and try again"
    exit 1
fi

echo "‚úÖ No PII found, proceeding with commit"
```

### –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
# –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (–¥–æ–±–∞–≤–∏—Ç—å –≤ cron –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
0 3 * * 0 cd /home/batman/expense_bot && python check_pii.py || echo "PII detected!" | mail -s "PII Alert" admin@example.com
```

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### –†–∏—Å–∫ 1: –ü–æ–ª–æ–º–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞
- **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω—è—è (31 —Ñ–∞–π–ª –Ω–∞ —Ä–µ–≤–∏–∑–∏—é)
- **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –û—à–∏–±–∫–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –±–æ—Ç–∞, –ø–∞–¥–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
- **–ú–µ—Ä—ã –º–∏—Ç–∏–≥–∞—Ü–∏–∏:**
  - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (`check_pii.py`)
  - ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —á–µ—Ä–µ–∑ diff —Å baseline
  - ‚úÖ –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ
  - ‚úÖ Backup –ë–î –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
  - ‚úÖ –î–µ–ø–ª–æ–π –≤ –ø–µ—Ä–∏–æ–¥ –Ω–∏–∑–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  - ‚úÖ –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞ –≥–æ—Ç–æ–≤

### –†–∏—Å–∫ 2: –°—Ç–∞—Ä—ã–µ FSM states —Å PII
- **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** üü† –í—ã—Å–æ–∫–∞—è (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–º–∏ —Å–µ—Å—Å–∏—è–º–∏)
- **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** KeyError –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –ø–æ–ª—è–º
- **–ú–µ—Ä—ã –º–∏—Ç–∏–≥–∞—Ü–∏–∏:**
  - ‚úÖ FSMCleanupMiddleware (–®–∞–≥ 2) - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞
  - ‚úÖ Fallback —Ñ—É–Ω–∫—Ü–∏–∏ `_get_pending_data_safe()`
  - ‚úÖ Graceful degradation –±–µ–∑ –æ—à–∏–±–æ–∫
  - ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–∏—Å—Ç–æ–∫ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
  - ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ –î–û –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –†–∏—Å–∫ 3: –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
- **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** üü¢ –ù–∏–∑–∫–∞—è
- **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –ü–æ—Ç–µ—Ä—è username/first_name (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, —Ç.–∫. –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
- **–ú–µ—Ä—ã –º–∏—Ç–∏–≥–∞—Ü–∏–∏:**
  - ‚úÖ –î–≤–∞ backup'–∞ (–¥–æ –∏ –≤–æ –≤—Ä–µ–º—è –¥–µ–ø–ª–æ—è)
  - ‚úÖ –ö–æ–ø–∏—è backup'–∞ –ª–æ–∫–∞–ª—å–Ω–æ
  - ‚úÖ Django –º–∏–≥—Ä–∞—Ü–∏–∏ –æ–±—Ä–∞—Ç–∏–º—ã (`migrate <previous>`)
  - ‚úÖ –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞ –ë–î –≥–æ—Ç–æ–≤

### –†–∏—Å–∫ 4: –ü—Ä–æ–±–ª–µ–º—ã —Å Django admin
- **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** üü¢ –ù–∏–∑–∫–∞—è
- **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –ê–¥–º–∏–Ω–∫–∞ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–ú–µ—Ä—ã –º–∏—Ç–∏–≥–∞—Ü–∏–∏:**
  - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `list_display` –≤ admin.py
  - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `search_fields`
  - ‚úÖ –ú–µ—Ç–æ–¥ `__str__` –∏–∑–º–µ–Ω–µ–Ω
  - ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ

### –†–∏—Å–∫ 5: –ü—Ä–æ–ø—É—Å–∫ —Ä–µ–¥–∫–∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π PII
- **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** üü° –°—Ä–µ–¥–Ω—è—è (31 —Ñ–∞–π–ª, —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç–æ—Ä)
- **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** PII –æ—Å—Ç–∞–µ—Ç—Å—è –≤ –∫–æ–¥–µ, –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è
- **–ú–µ—Ä—ã –º–∏—Ç–∏–≥–∞—Ü–∏–∏:**
  - ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ `check_pii.py`
  - ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —á–µ—Ä–µ–∑ grep/ripgrep
  - ‚úÖ –ë–∞–∑–æ–≤—ã–π –æ—Ç—á–µ—Ç (baseline) –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
  - ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### –†–∏—Å–∫ 6: Downtime –≤–æ –≤—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–∏
- **–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å:** üü¢ –ù–∏–∑–∫–∞—è
- **–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** –ë–æ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω 1-3 –º–∏–Ω—É—Ç—ã
- **–ú–µ—Ä—ã –º–∏—Ç–∏–≥–∞—Ü–∏–∏:**
  - ‚úÖ –î–µ–ø–ª–æ–π –≤ –ø–µ—Ä–∏–æ–¥ –Ω–∏–∑–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (3-4 —á–∞—Å–∞ –Ω–æ—á–∏)
  - ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞—Ä–∞–Ω–µ–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  - ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (—É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ = –±—ã—Å—Ç—Ä–æ)
  - ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞
- [ ] –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `check_pii.py`
- [ ] –ó–∞–ø—É—â–µ–Ω–æ –ø–µ—Ä–≤–∏—á–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –°–æ–∑–¥–∞–Ω baseline: `pii_scan_baseline.txt`
- [ ] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –ö–æ–¥ - Fallback –¥–ª—è FSM (–®–∞–≥ 2)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω fallback –≤ `privacy_check.py`
- [ ] –î–æ–±–∞–≤–ª–µ–Ω fallback –≤ `start.py`
- [ ] –°–æ–∑–¥–∞–Ω `FSMCleanupMiddleware`
- [ ] Middleware –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ bot.py
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω fallback –ª–æ–∫–∞–ª—å–Ω–æ

### –ö–æ–¥ - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (–®–∞–≥ 3.1)
- [ ] –ò–∑–º–µ–Ω–µ–Ω `logging_middleware.py` (—Å—Ç—Ä–æ–∫–∞ 62)
- [ ] –ò–∑–º–µ–Ω–µ–Ω `activity_tracker.py` (—Å—Ç—Ä–æ–∫–∏ 56, 77, 92, 95, 104)
- [ ] –ó–∞–ø—É—â–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞: `python check_pii.py`

### –ö–æ–¥ - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–®–∞–≥ 3.2)
- [ ] –ò–∑–º–µ–Ω–µ–Ω `admin_notifier.py` (—Å—Ç—Ä–æ–∫–∏ 270, 284-288)
- [ ] –ù–∞–π–¥–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã `notify_new_user()`
- [ ] –£–±—Ä–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã username/first_name –∏–∑ –≤—Å–µ—Ö –≤—ã–∑–æ–≤–æ–≤
- [ ] –ó–∞–ø—É—â–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞: `python check_pii.py`

### –ö–æ–¥ - UI/–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–®–∞–≥ 3.4)
- [ ] –ò–∑–º–µ–Ω–µ–Ω `pdf_report_html.py` (—Å—Ç—Ä–æ–∫–∞ 186)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ —Ä–æ—É—Ç–µ—Ä—ã –Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ username
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ username
- [ ] –ó–∞–ø—É—â–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞: `python check_pii.py`

### –ö–æ–¥ - Household/Family/Referral (–®–∞–≥ 3.5)
- [ ] –ò–∑–º–µ–Ω–µ–Ω `household.py`
- [ ] –ò–∑–º–µ–Ω–µ–Ω `family.py`
- [ ] –ò–∑–º–µ–Ω–µ–Ω `referral.py`
- [ ] –ò–∑–º–µ–Ω–µ–Ω `affiliate.py`
- [ ] –ó–∞–ø—É—â–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞: `python check_pii.py`

### –ö–æ–¥ - Django Admin (–®–∞–≥ 3.6)
- [ ] –ò–∑–º–µ–Ω–µ–Ω `expenses/admin.py` (list_display, search_fields)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω admin –ª–æ–∫–∞–ª—å–Ω–æ

### –ö–æ–¥ - –°–æ–∑–¥–∞–Ω–∏–µ Profile (–®–∞–≥ 3.7)
- [ ] –ù–∞–π–¥–µ–Ω—ã –≤—Å–µ `Profile.objects.create()`
- [ ] –£–±—Ä–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã PII –∏–∑ –≤—Å–µ—Ö –º–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è
- [ ] –ó–∞–ø—É—â–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞: `python check_pii.py`

### –ú–æ–¥–µ–ª—å (–®–∞–≥ 4)
- [ ] –ò–∑–º–µ–Ω–µ–Ω `database/models.py` - —É–¥–∞–ª–µ–Ω—ã –ø–æ–ª—è
- [ ] –ò–∑–º–µ–Ω–µ–Ω –º–µ—Ç–æ–¥ `__str__` –≤ Profile
- [ ] –£–¥–∞–ª–µ–Ω—ã property –º–µ—Ç–æ–¥—ã —Å PII (–µ—Å–ª–∏ –µ—Å—Ç—å)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –¥—Ä—É–≥–∏–µ –º–æ–¥–µ–ª–∏ –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ PII

### –ú–∏–≥—Ä–∞—Ü–∏—è (–®–∞–≥ 5)
- [ ] –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è: `python manage.py makemigrations --name remove_pii_fields`
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è: `cat expenses/migrations/XXXX_remove_pii_fields.py`
- [ ] –ü—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω SQL: `python manage.py sqlmigrate expenses XXXX`
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω –ø–ª–∞–Ω: `python manage.py migrate --plan`

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–®–∞–≥ 6)
- [ ] –§–∏–Ω–∞–ª—å–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ: `python check_pii.py` ‚Üí 0 —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π
- [ ] –õ–∏–Ω—Ç–µ—Ä—ã –ø—Ä–æ–π–¥–µ–Ω—ã: flake8, mypy
- [ ] Pytest –ø—Ä–æ–π–¥–µ–Ω
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] PDF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
- [ ] Django admin —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ü–æ–∏—Å–∫ –ø–æ telegram_id —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°—Ç–∞—Ä—ã–µ FSM states –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç –æ—à–∏–±–æ–∫

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é (–®–∞–≥ 7)
- [ ] Backup –ë–î —Å–æ–∑–¥–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- [ ] Backup –ë–î —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] Git commit —Å–æ–∑–¥–∞–Ω —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º
- [ ] Git push –≤—ã–ø–æ–ª–Ω–µ–Ω
- [ ] –°–æ–∑–¥–∞–Ω –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞: `docs/PII_REMOVAL_ROLLBACK.md`

### –î–µ–ø–ª–æ–π (–®–∞–≥ 8)
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] –§–∏–Ω–∞–ª—å–Ω—ã–π backup –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º
- [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: `docker-compose down`
- [ ] –ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω: `git pull origin master`
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞: `docker-compose run --rm web python manage.py migrate`
- [ ] –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã: `docker-compose up -d`
- [ ] –õ–æ–≥–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –Ω–∞ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è (–®–∞–≥ 9)
- [ ] –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
- [ ] Username –Ω–µ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è: `docker-compose logs bot | grep username` ‚Üí –ø—É—Å—Ç–æ
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç–µ—Å—Ç –≤ Telegram)
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] PDF –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
- [ ] Django admin —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Rate limiter –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- [ ] –ü–æ–ª—è —É–¥–∞–ª–µ–Ω—ã –∏–∑ –ë–î: `\d profiles` ‚Üí –Ω–µ—Ç username/first_name

### –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è (–®–∞–≥ 10)
- [ ] –°—Ç–∞—Ä—ã–µ –ª–æ–≥–∏ –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] CLAUDE.md –æ–±–Ω–æ–≤–ª–µ–Ω (—Ä–∞–∑–¥–µ–ª Privacy & GDPR)
- [ ] README –æ–±–Ω–æ–≤–ª–µ–Ω (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- [ ] CI/CD –ø—Ä–æ–≤–µ—Ä–∫–∞ PII –¥–æ–±–∞–≤–ª–µ–Ω–∞ (–±—É–¥—É—â–µ–µ)
- [ ] –°–æ–∑–¥–∞–Ω –æ—Ç—á–µ—Ç: `docs/PII_REMOVAL_COMPLETION_REPORT.md`

---

## üîÑ –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç (–ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö)

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh batman@94.198.220.155
cd /home/batman/expense_bot

# 2. –ù–∞–π—Ç–∏ commit hash –î–û –∏–∑–º–µ–Ω–µ–Ω–∏–π
git log --oneline -10
# –ù–∞–π—Ç–∏ –∫–æ–º–º–∏—Ç –ø–µ—Ä–µ–¥ "Privacy: Remove PII fields"

# 3. –û—Ç–∫–∞—Ç–∏—Ç—å –∫–æ–¥
git reset --hard <commit_hash>

# 4. –û—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –ë–î
docker-compose run --rm web python manage.py migrate expenses XXXX_previous_migration

# 5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker-compose restart

# 6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
docker-compose logs --tail=100 bot
docker-compose ps
```

### –ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞—Ç –ë–î (–µ—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–∑–≤–∞–ª–∞ –ø—Ä–æ–±–ª–µ–º—ã)

```bash
# –í–ù–ò–ú–ê–ù–ò–ï: –ü–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ backup!

# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ë–î –∏–∑ backup
docker-compose up -d db  # –¢–æ–ª—å–∫–æ –ë–î
docker exec -i expense_bot_db psql -U expense_user expense_bot < \
    /home/batman/backups/before_pii_removal_YYYYMMDD_HHMMSS.sql

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose up -d

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
docker-compose ps
```

### –ß–∞—Å—Ç–∏—á–Ω—ã–π –æ—Ç–∫–∞—Ç (—Ç–æ–ª—å–∫–æ –∫–æ–¥–∞, –ë–î –æ—Å—Ç–∞–≤–∏—Ç—å)

```bash
# –ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ, –Ω–æ –≤ –∫–æ–¥–µ –æ—à–∏–±–∫–∏

# 1. –û—Ç–∫–∞—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–¥
git reset --hard <commit_hash>
docker-compose restart bot web celery

# 2. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –æ–±—Ä–∞—Ç–Ω–æ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
docker-compose run --rm web python manage.py migrate

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
docker-compose logs --tail=100 bot
```

---

## üìé –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ A: –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ —Å username

**–ù–∞–π–¥–µ–Ω–æ: 31 —Ñ–∞–π–ª**

#### üî¥ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ (—Ç—Ä–µ–±—É—é—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π):
1. `bot/middlewares/logging_middleware.py` - —Å—Ç—Ä–æ–∫–∞ 62, 118, 121, 128
2. `bot/middleware/activity_tracker.py` - —Å—Ç—Ä–æ–∫–∞ 56, 77, 92, 95, 104
3. `bot/services/admin_notifier.py` - —Å—Ç—Ä–æ–∫–∞ 270, 284-288
4. `bot/middlewares/privacy_check.py` - —Å—Ç—Ä–æ–∫–∞ 98-100
5. `bot/routers/start.py` - —Å—Ç—Ä–æ–∫–∞ 235-237
6. `bot/services/pdf_report_html.py` - —Å—Ç—Ä–æ–∫–∞ 186
7. `database/models.py` - —Å—Ç—Ä–æ–∫–∞ 15, 50
8. `expenses/admin.py` - list_display, search_fields

#### üü° –¢—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:
9. `bot/routers/household.py`
10. `bot/routers/family.py`
11. `bot/routers/referral.py`
12. `bot/services/affiliate.py`
13. `bot/services/household.py`
14. `bot/utils/input_sanitizer.py`
15. `expenses/models_old.py`
16. `create_superuser.py`

#### ‚ö™ –ê—Ä—Ö–∏–≤–Ω—ã–µ (–Ω–µ —Ç—Ä–æ–≥–∞–µ–º):
17-31. –§–∞–π–ª—ã –≤ `archive/`, `archive_20251102/`, `archive_20251105/` –∏ —Ç.–¥.

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ B: –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ PII

```bash
# –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ ripgrep (–±—ã—Å—Ç—Ä–µ–µ grep)
rg "\.username\b" --type py --iglob '!archive*' --iglob '!venv'
rg "\.first_name\b" --type py --iglob '!archive*' --iglob '!venv'
rg "\.last_name\b" --type py --iglob '!archive*' --iglob '!venv'

# –ü–æ–∏—Å–∫ —á–µ—Ä–µ–∑ grep
grep -rn "\.username\|\.first_name\|\.last_name" \
    --include="*.py" \
    --exclude-dir={venv,archive*,__pycache__} \
    bot/ database/ expenses/

# –ü–æ–∏—Å–∫ –≤ –ª–æ–≥–∞—Ö
docker-compose logs bot | grep -i "username"
```

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ C: SQL –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ë–î

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã profiles
\d profiles

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∫–æ–ª–æ–Ω–æ–∫ (–¥–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å 0 –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏)
SELECT column_name
FROM information_schema.columns
WHERE table_name = 'profiles'
  AND column_name IN ('username', 'first_name', 'last_name');

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (—Ç–æ–ª—å–∫–æ telegram_id)
SELECT telegram_id, subscription_end_date, is_beta_tester
FROM profiles
LIMIT 10;
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:** DevOps/Backend team
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞–Ω–∞:** 2025-11-11
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-11

**–í —Å–ª—É—á–∞–µ –ø—Ä–æ–±–ª–µ–º:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `docker-compose logs bot`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å backup: `ls -lh /home/batman/backups/`
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞ –∏–∑ —Ä–∞–∑–¥–µ–ª–∞ [–û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π](#–æ—Ç–∫–∞—Ç-–∏–∑–º–µ–Ω–µ–Ω–∏–π)

---

**–°—Ç–∞—Ç—É—Å:** üìã –ì–æ—Ç–æ–≤ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é
**–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 6-9 —á–∞—Å–æ–≤
**Downtime:** 1-3 –º–∏–Ω—É—Ç—ã (–≤–æ –≤—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–∏)

**–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

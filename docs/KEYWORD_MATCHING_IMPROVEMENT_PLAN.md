# –ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã keyword matching –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ä–∞—Å—Ö–æ–¥–æ–≤

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2026-01-10
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 2026-01-10
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û (–í–∞—Ä–∏–∞–Ω—Ç C + —É–ª—É—á—à–µ–Ω–∏—è)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

> **‚ö° –í–ê–ñ–ù–û–ï –ò–ó–ú–ï–ù–ï–ù–ò–ï (2026-01-10):**
> –ü–ª–∞–Ω –±—ã–ª **–£–ü–†–û–©–ï–ù** - —É–¥–∞–ª–µ–Ω–∞ –≤—Å—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—è `language`.
>
> **–ü—Ä–∏—á–∏–Ω–∞:** –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –ø–æ–∫–∞–∑–∞–ª, —á—Ç–æ –ø–æ–ª–µ `language` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î (CategoryKeyword),
> –Ω–æ **–ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø** –Ω–∏–≥–¥–µ –≤ production –∫–æ–¥–µ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.
>
> **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ —Å—Ç–∞–ª –ø—Ä–æ—â–µ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã.

---

## ‚úÖ –°–¢–ê–¢–£–° –†–ï–ê–õ–ò–ó–ê–¶–ò–ò (–æ–±–Ω–æ–≤–ª–µ–Ω–æ 2026-01-10)

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

1. **‚úÖ –°–æ–∑–¥–∞–Ω —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å** `bot/utils/keyword_service.py`:
   - –§—É–Ω–∫—Ü–∏—è `normalize_keyword_text()` - –µ–¥–∏–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –¥–æ—Ö–æ–¥–æ–≤
   - –§—É–Ω–∫—Ü–∏—è `ensure_unique_keyword()` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –¥–æ—Ö–æ–¥–æ–≤
   - –§—É–Ω–∫—Ü–∏—è `match_keyword_in_text()` - **3 —É—Ä–æ–≤–Ω—è matching** (exact, prefix, inflection)

2. **‚úÖ 3-—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ matching**:
   - –£—Ä–æ–≤–µ–Ω—å 1: –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π —Ñ—Ä–∞–∑—ã
   - –£—Ä–æ–≤–µ–Ω—å 2: –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–∞—á–∞–ª–∞ —Ñ—Ä–∞–∑—ã (–ø–µ—Ä–≤—ã–µ 2-3 —Å–ª–æ–≤–∞)
   - –£—Ä–æ–≤–µ–Ω—å 3: –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–æ —Å–∫–ª–æ–Ω–µ–Ω–∏—è–º–∏ (–¥–ª—è –æ–¥–∏–Ω–æ—á–Ω—ã—Ö keywords >= 4 —Å–∏–º–≤–æ–ª–æ–≤ —Å **–õ–Æ–ë–´–ú** —Å–ª–æ–≤–æ–º —Ç–µ–∫—Å—Ç–∞)

3. **‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–π –±–∞–≥** (–¥–µ–∫–∞–±—Ä—å 2025):
   - **–ü—Ä–æ–±–ª–µ–º–∞:** Inflection –ø—Ä–æ–≤–µ—Ä—è–ª—Å—è —Ç–æ–ª—å–∫–æ —Å **–ø–µ—Ä–≤—ã–º** —Å–ª–æ–≤–æ–º —Ç–µ–∫—Å—Ç–∞
   - **–†–µ—à–µ–Ω–∏–µ:** Inflection —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å **–õ–Æ–ë–´–ú** —Å–ª–æ–≤–æ–º —Ç–µ–∫—Å—Ç–∞ >= 4 —Å–∏–º–≤–æ–ª–æ–≤
   - **–†–µ–∑—É–ª—å—Ç–∞—Ç:** "–∑–∞—Ä–ø–ª–∞—Ç–∞" –º–∞—Ç—á–∏—Ç "–º–Ω–µ –ø–µ—Ä–µ–≤–µ–ª–∏ –∑–∞—Ä–ø–ª–∞—Ç—É" ‚úÖ

4. **‚úÖ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏**:
   - –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `test_keyword_matching_v2.py` —Å 40 —Ç–µ—Å—Ç–∞–º–∏
   - –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ ‚úÖ
   - –ü–æ–∫—Ä—ã—Ç–∏–µ: –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è, exact, prefix, inflection, –∑–∞—â–∏—Ç–∞ –æ—Ç –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å–ª–æ–≤, —Ä–µ–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

5. **‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
   - –§–∞–π–ª `docs/HABR_TECHNICAL_INFO.md` - —Ä–∞–∑–¥–µ–ª "Keyword Matching ‚Äî —ç–≤–æ–ª—é—Ü–∏—è –ø–æ–¥—Ö–æ–¥–∞"
   - –û–ø–∏—Å–∞–Ω–∏–µ –ë–ê–ì #2 (inflection regression) –∏ –µ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±—É—á–µ–Ω–∏–µ (–ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏–π UX):

**–í–ê–ñ–ù–û:** –û–±—É—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é **–ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ï**, –Ω–∏–∫–∞–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ UX –Ω–µ –±—ã–ª–æ!

- **–ö–æ–≥–¥–∞ AI –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä—É–µ—Ç** —Ç—Ä–∞—Ç—É/–¥–æ—Ö–æ–¥ ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è keyword (–ø–æ–ª–Ω–∞—è —Ñ—Ä–∞–∑–∞)
- **–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–µ–Ω—è–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é** –≤—Ä—É—á–Ω—É—é ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤–µ—Å–∞ keywords
- **–ù–ï–¢ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π**, **–ù–ï–¢ –¥–∏–∞–ª–æ–≥–æ–≤**, **–ù–ï–¢ —Ä—É—á–Ω–æ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è keywords**
- –ü—Ä–∏–Ω—Ü–∏–ø: "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –¥–æ–ª–∂–µ–Ω –Ω–∏—á–µ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–ø—Ä–∞–≤–∏—Ç –µ—Å–ª–∏ —á—Ç–æ."

### Git –∫–æ–º–º–∏—Ç—ã:
- `c711d43` - "Fix inflection matching: check ANY word in text, not just first"
- `6a7a3aa` - "Update test expectations and documentation for inflection fix"

---

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã](#–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º—ã)
2. [–ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#–∞–Ω–∞–ª–∏–∑-—Ç–µ–∫—É—â–µ–π-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
3. [–†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫](#—Ä–µ–∞–ª—å–Ω—ã–µ-–ø—Ä–∏–º–µ—Ä—ã-–æ—à–∏–±–æ–∫)
4. [–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è](#–≤–∞—Ä–∏–∞–Ω—Ç—ã-—Ä–µ—à–µ–Ω–∏—è)
5. [–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ](#—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ-—Ä–µ—à–µ–Ω–∏–µ)
6. [–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#–ø–ª–∞–Ω-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
7. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)

---

## üêõ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### –°—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

–¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ keyword matching –∏—â–µ—Ç **–æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞** –≤–Ω—É—Ç—Ä–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ª–æ–∂–Ω—ã–º —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è–º:

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç: `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π 390`
- –°–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç —Å–ª–æ–≤–æ **"—Ç–µ—Å—Ç"** –≤–Ω—É—Ç—Ä–∏ "–≤ **—Ç–µ—Å—Ç–µ**"
- –ü—Ä–∏–º–µ–Ω—è–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é –∏–∑ saved keyword: `—Ç–µ—Å—Ç` ‚Üí `–†–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏` ‚ùå
- **AI –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è**, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–∞–π–¥–µ–Ω–∞

### –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è

1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è** –±–µ–∑ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ AI –∏—Å–ø—Ä–∞–≤–∏—Ç—å
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–Ω—É–∂–¥–µ–Ω –≤—Ä—É—á–Ω—É—é –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å** –∫–∞—Ç–µ–≥–æ—Ä–∏—é
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±—É—á–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –º—É—Å–æ—Ä–Ω—ã–µ keywords**:
   - "–¥–æ–ª–≥ –∑–∞ —Ç–µ—Å—Ç" ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç keyword "—Ç–µ—Å—Ç"
   - "—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ" ‚Üí –Ω–∞—Ö–æ–¥–∏—Ç "—Ç–µ—Å—Ç" ‚Üí –∫–∞—Ç–µ–≥–æ—Ä–∏—è "–†–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏"
4. **–ü–ª–æ—Ö–æ–π UX**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç –ø–æ—á–µ–º—É –≤—ã–±—Ä–∞–Ω–∞ —Å—Ç—Ä–∞–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è

---

## üîç –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ì–¥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç keyword matching

**–§–∞–π–ª:** `bot/utils/expense_parser.py`
**–§—É–Ω–∫—Ü–∏—è:** `parse_expense_message()`
**–°—Ç—Ä–æ–∫–∏:** 774-837

### –¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞

```python
# –°—Ç—Ä–æ–∫–∏ 810-834
for user_cat in user_categories:
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    keywords = await get_keywords()
    for kw in keywords:
        # –ü–†–û–ë–õ–ï–ú–ê: –∏—â–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞ –≤ —Ç–µ–∫—Å—Ç–µ
        if keyword_matches_in_text(kw.keyword.lower(), text_for_keywords):
            # –ù–∞—à–ª–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ ‚Üí –ø—Ä–∏–º–µ–Ω—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é
            category = get_category_display_name(user_cat, lang_code)
            max_score = 100
            break
```

### –§—É–Ω–∫—Ü–∏—è `keyword_matches_in_text()`

**–§–∞–π–ª:** `bot/utils/expense_parser.py`
**–°—Ç—Ä–æ–∫–∏:** 107-128

```python
def keyword_matches_in_text(keyword: str, text: str) -> bool:
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –µ—Å—Ç—å –ª–∏ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ –≤ —Ç–µ–∫—Å—Ç–µ –∫–∞–∫ –¶–ï–õ–û–ï –°–õ–û–í–û —Å —É—á–µ—Ç–æ–º —Å–∫–ª–æ–Ω–µ–Ω–∏–π.
    """
    if not keyword or not text:
        return False
    keyword_lower = keyword.lower().strip()
    text_lower = text.lower()
    text_words = re.findall(r'[\w–∞-—è—ë–ê-–Ø–Å\-]+', text_lower)

    for word in text_words:
        # –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
        if word == keyword_lower:
            return True
        # –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å —É—á–µ—Ç–æ–º —Å–∫–ª–æ–Ω–µ–Ω–∏–π (–ø–µ—Ä–≤—ã–µ N —Å–∏–º–≤–æ–ª–æ–≤)
        if word.startswith(keyword_lower):
            ending_length = len(word) - len(keyword_lower)
            if ending_length <= 2:  # –†–∞–∑—Ä–µ—à–∞–µ–º –æ–∫–æ–Ω—á–∞–Ω–∏—è –¥–æ 2 —Å–∏–º–≤–æ–ª–æ–≤
                return True
    return False
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –§—É–Ω–∫—Ü–∏—è –∏—â–µ—Ç **–æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞** –≤ —Ç–µ–∫—Å—Ç–µ:
- `keyword = "—Ç–µ—Å—Ç"`, `text = "—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"`
- –†–∞–∑–±–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞ —Å–ª–æ–≤–∞: `["—Å–æ—Å–∏—Å–∫–∞", "–≤", "—Ç–µ—Å—Ç–µ", "–∏", "—á–∞–π"]`
- –ù–∞—Ö–æ–¥–∏—Ç `"—Ç–µ—Å—Ç–µ"` ‚Üí `startswith("—Ç–µ—Å—Ç")` ‚Üí `True` ‚úÖ
- **–õ–æ–∂–Ω–æ–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–µ!**

### –ß—Ç–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ keywords

**–§–∞–π–ª:** `expense_bot/celery_tasks.py`
**–§—É–Ω–∫—Ü–∏—è:** `learn_keywords_on_create()`
**–°—Ç—Ä–æ–∫–∏:** 1380-1464

```python
@shared_task
def learn_keywords_on_create(expense_id: int, category_id: int):
    """
    –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—É—á–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–æ–≤—ã—Ö —Ç—Ä–∞—Ç.
    –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–ª–æ–≤–∞ –∏–∑ description –∫–∞–∫ keywords –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.
    """
    # –ò–∑–≤–ª–µ–∫–∞–µ–º —Å–ª–æ–≤–∞ –∏–∑ description
    words = re.findall(r'[\w–∞-—è—ë–ê-–Ø–Å\-]+', expense.description.lower())

    for word in words:
        if len(word) >= 3:  # –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ —Å–ª–æ–≤–∞
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –ö–ê–ñ–î–û–ï –°–õ–û–í–û –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π keyword
            CategoryKeyword.objects.get_or_create(
                category=expense.category,
                keyword=word,
                defaults={'weight': 1.0}
            )
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–æ—Ö—Ä–∞–Ω—è–µ—Ç **–∫–∞–∂–¥–æ–µ —Å–ª–æ–≤–æ –æ—Ç–¥–µ–ª—å–Ω–æ**:
- –í–≤–æ–¥: `"–î–æ–ª–≥ –∑–∞ —Ç–µ—Å—Ç 500"`
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç: `["–¥–æ–ª–≥", "—Ç–µ—Å—Ç"]` –∫–∞–∫ keywords
- –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–ª–æ–≤–æ "—Ç–µ—Å—Ç" —Ç–µ–ø–µ—Ä—å —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é –≤–µ–∑–¥–µ

---

## üî• –†–µ–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫

### –ü—Ä–∏–º–µ—Ä 1: "–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π 390" ‚Üí "–†–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏"

**–î–∞—Ç–∞:** 2026-01-09 18:28:25
**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ID:** 881292737

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª: `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π 390`
2. –°–∏—Å—Ç–µ–º–∞ –Ω–∞—à–ª–∞ keyword: `—Ç–µ—Å—Ç` ‚Üí –∫–∞—Ç–µ–≥–æ—Ä–∏—è `–†–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏`
3. AI **–ù–ï –±—ã–ª –≤—ã–∑–≤–∞–Ω** (–∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–∞–π–¥–µ–Ω–∞, confidence = 0.5)
4. –†–µ–∑—É–ª—å—Ç–∞—Ç: –∫–∞—Ç–µ–≥–æ—Ä–∏—è `–†–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏` ‚ùå
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–ø—Ä–∞–≤–∏–ª –Ω–∞: `–ö–∞—Ñ–µ –∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã` ‚úÖ

**Saved keywords –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–†–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏":**
```
—Ç–µ—Å—Ç         ‚Üê –ü–†–û–ë–õ–ï–ú–ù–´–ô KEYWORD!
–º–∞—Ç–≤–µ–π
–ø–∞–ø–µ
–æ–∫—Å–∞–Ω–∞
–¥–æ–ª–≥
—Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏
—Ä–æ–¥–∏—Ç–µ–ª–∏
–Ω–∞–º–∞—Ç—Ä–∞—Å–Ω–∏–∫
google
```

**–û—Ç–∫—É–¥–∞ –≤–∑—è–ª—Å—è "—Ç–µ—Å—Ç":**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–Ω–µ–µ –≤–≤–æ–¥–∏–ª —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ "–î–æ–ª–≥ –∑–∞ —Ç–µ—Å—Ç 500"
- –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∞ —Å–ª–æ–≤–æ "—Ç–µ—Å—Ç" –∫–∞–∫ keyword
- –¢–µ–ø–µ—Ä—å "—Ç–µ—Å—Ç" —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–†–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏" –≤–µ–∑–¥–µ

---

### –ü—Ä–∏–º–µ—Ä 2: "–¢–∞–Ω–¥—ã—Ä 460" ‚Üí "–ü—Ä–æ–¥—É–∫—Ç—ã" (AI –æ—à–∏–±–∫–∞)

**–î–∞—Ç–∞:** 2026-01-09 14:40:56
**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ID:** 881292737

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª: `–¢–∞–Ω–¥—ã—Ä 460`
2. Keywords –Ω–µ –Ω–∞—à–ª–∏ ‚Üí –≤—ã–∑–≤–∞–Ω AI
3. AI –≤—ã–±—Ä–∞–ª: `–ü—Ä–æ–¥—É–∫—Ç—ã` (confidence: 0.9) ‚ùå
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–ø—Ä–∞–≤–∏–ª –Ω–∞: `–ö–∞—Ñ–µ –∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã` ‚úÖ

**–ê–Ω–∞–ª–∏–∑:**
- "–¢–∞–Ω–¥—ã—Ä" = –≥–æ—Ç–æ–≤–æ–µ –±–ª—é–¥–æ (–ª–µ–ø–µ—à–∫–∏ –∏–∑ —Ç–∞–Ω–¥—ã—Ä–Ω–æ–π –ø–µ—á–∏)
- –°—É–º–º–∞ 460‚ÇΩ = —Ü–µ–Ω–∞ –≥–æ—Ç–æ–≤–æ–π –µ–¥—ã
- AI –Ω–µ –ø–æ–Ω—è–ª –∫–æ–Ω—Ç–µ–∫—Å—Ç "–≥–æ—Ç–æ–≤–∞—è –µ–¥–∞ vs –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç—ã"
- **–≠—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–æ–º–ø—Ç–∞ AI, –Ω–µ keyword matching**

---

### –ü—Ä–∏–º–µ—Ä 3: "–í–æ–¥–∏—Ü–∞ 130" ‚Üí "–ü—Ä–æ–¥—É–∫—Ç—ã", –¥–æ–ª–∂–Ω–æ "–°–ø–æ—Ä—Ç"

**–î–∞—Ç–∞:** 2026-01-09 18:30:59
**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ID:** 881292737

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª: `–í–æ–¥–∏—Ü–∞ 130`
2. –°–∏—Å—Ç–µ–º–∞ –Ω–∞—à–ª–∞ keyword: `–≤–æ–¥–∏—Ü–∞` ‚Üí –∫–∞—Ç–µ–≥–æ—Ä–∏—è `–ü—Ä–æ–¥—É–∫—Ç—ã`
3. AI **–ù–ï –±—ã–ª –≤—ã–∑–≤–∞–Ω** (–∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–∞–π–¥–µ–Ω–∞ —á–µ—Ä–µ–∑ keyword)
4. –†–µ–∑—É–ª—å—Ç–∞—Ç: –∫–∞—Ç–µ–≥–æ—Ä–∏—è `–ü—Ä–æ–¥—É–∫—Ç—ã` ‚ùå
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏—Å–ø—Ä–∞–≤–∏–ª –Ω–∞: `–°–ø–æ—Ä—Ç` ‚úÖ

**–ê–Ω–∞–ª–∏–∑:**
- "–í–æ–¥–∏—Ü–∞" —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∫–∞–∫ keyword –¥–ª—è "–ü—Ä–æ–¥—É–∫—Ç—ã"
- –ù–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—Ç–µ–ª "–°–ø–æ—Ä—Ç"
- **–ü—Ä–æ–±–ª–µ–º–∞:** –æ–¥–Ω–æ —Å–ª–æ–≤–æ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ä–∞–∑–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö

---

### –ü—Ä–∏–º–µ—Ä 4: "–ü–æ—Ä—Ç—Ñ–µ–ª—å 1700" ‚Üí "–û–¥–µ–∂–¥–∞ –∏ –æ–±—É–≤—å" (AI –æ—à–∏–±–∫–∞)

**–î–∞—Ç–∞:** 2026-01-09 11:22:10
**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ID:** 881292737

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª: `–ü–æ—Ä—Ç—Ñ–µ–ª—å 1700`
2. Keywords –Ω–µ –Ω–∞—à–ª–∏ ‚Üí –≤—ã–∑–≤–∞–Ω AI
3. AI –≤—ã–±—Ä–∞–ª: `–û–¥–µ–∂–¥–∞ –∏ –æ–±—É–≤—å` (confidence: 0.9) ‚ùå
4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å **—É–¥–∞–ª–∏–ª** —Ç—Ä–∞—Ç—É –ø–æ–ª–Ω–æ—Å—Ç—å—é

**–ê–Ω–∞–ª–∏–∑:**
- "–ü–æ—Ä—Ç—Ñ–µ–ª—å" ‚Äî —ç—Ç–æ –∞–∫—Å–µ—Å—Å—É–∞—Ä, –Ω–µ –æ–¥–µ–∂–¥–∞
- –£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã"
- AI –≤—ã–±—Ä–∞–ª "–±–ª–∏–∑–∫—É—é" –∫–∞—Ç–µ–≥–æ—Ä–∏—é
- **–≠—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞ –ø—Ä–æ–º–ø—Ç–∞ AI, –Ω–µ keyword matching**

---

## üéØ –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç A: –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è

#### –û–ø–∏—Å–∞–Ω–∏–µ

–°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ –∏—Å–∫–∞—Ç—å **–ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ** —Ä–∞—Å—Ö–æ–¥–∞ (–±–µ–∑ —Å—É–º–º—ã) –∫–∞–∫ –µ–¥–∏–Ω—ã–π keyword.

#### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏:**
   - –í–≤–æ–¥: `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π 390`
   - –ò–∑–≤–ª–µ–∫–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ: `"–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"`
   - –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º: `"—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"` (lowercase, trim)
   - –°–æ—Ö—Ä–∞–Ω—è–µ–º **–í–°–Æ –§–†–ê–ó–£** –∫–∞–∫ keyword

2. **–ü—Ä–∏ –ø–æ–∏—Å–∫–µ:**
   - –í–≤–æ–¥: `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π 350`
   - –ò–∑–≤–ª–µ–∫–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ: `"–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"`
   - –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º: `"—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"`
   - –ò—â–µ–º **—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ** —Å—Ä–µ–¥–∏ saved keywords
   - –ù–∞—à–ª–∏ ‚úÖ ‚Üí –ø—Ä–∏–º–µ–Ω—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é

#### –ü—Ä–∏–º–µ—Ä—ã

| –ù–æ–≤—ã–π –≤–≤–æ–¥ | Saved keyword | –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ? |
|------------|---------------|-------------|
| `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ 390` | `—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π` | ‚ùå –ù–ï–¢ (—Ä–∞–∑–Ω—ã–µ) |
| `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π 350` | `—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π` | ‚úÖ –î–ê (—Ç–æ—á–Ω–æ–µ) |
| `—Å–æ—Å–∏—Å–∫–∞ –≤ –¢–ï–°–¢–ï –∏ —á–∞–π 200` | `—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π` | ‚úÖ –î–ê (lowercase) |
| `–¢–µ—Å—Ç 500` | `—Ç–µ—Å—Ç` | ‚úÖ –î–ê (—Ç–æ—á–Ω–æ–µ) |
| `–î–æ–ª–≥ –∑–∞ —Ç–µ—Å—Ç 500` | `—Ç–µ—Å—Ç` | ‚ùå –ù–ï–¢ (—Ä–∞–∑–Ω—ã–µ) |

#### –ü–ª—é—Å—ã

- ‚úÖ **–ü—Ä–æ—Å—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å** (–∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ 2 —Ñ—É–Ω–∫—Ü–∏—è—Ö)
- ‚úÖ **–ù–µ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π** (—Ç–æ–ª—å–∫–æ —Ç–æ—á–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è)
- ‚úÖ **–ë—ã—Å—Ç—Ä–æ —Ä–∞–±–æ—Ç–∞–µ—Ç** (O(1) –ø–æ–∏—Å–∫ –≤ –ë–î)
- ‚úÖ **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### –ú–∏–Ω—É—Å—ã

- ‚ùå **–°–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–æ**: `"–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ"` ‚â† `"–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"`
- ‚ùå **–ù—É–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ** –∫–∞–∫ —Ä–∞–Ω—å—à–µ
- ‚ùå **–û–ø–µ—á–∞—Ç–∫–∏ –Ω–µ –ø—Ä–æ—â–∞—é—Ç—Å—è**: `"–°–∞—Å–∏—Å–∫–∞"` ‚â† `"–°–æ—Å–∏—Å–∫–∞"`
- ‚ùå **–í–∞—Ä–∏–∞—Ü–∏–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç**: –¥–æ–±–∞–≤–∏—Ç—å "–∏ –∫–æ—Ñ–µ" ‚Üí –Ω–µ —Å–æ–≤–ø–∞–¥–µ—Ç

#### –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

- **–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 1-2 —á–∞—Å–∞
- **–†–∏—Å–∫–∏:** –ù–∏–∑–∫–∏–µ
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü—Ä–æ—Å—Ç–æ–µ

---

### –í–∞—Ä–∏–∞–Ω—Ç B: Fuzzy matching (–Ω–µ—á–µ—Ç–∫–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)

#### –û–ø–∏—Å–∞–Ω–∏–µ

–ò—Å–∫–∞—Ç—å **–ø–æ—Ö–æ–∂–∏–µ —Ñ—Ä–∞–∑—ã** —Å—Ä–µ–¥–∏ saved keywords —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –Ω–µ—á–µ—Ç–∫–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å—Ç—Ä–æ–∫.

#### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏:**
   - –¢–æ –∂–µ —á—Ç–æ –≤ –í–∞—Ä–∏–∞–Ω—Ç–µ A (—Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å—é —Ñ—Ä–∞–∑—É)

2. **–ü—Ä–∏ –ø–æ–∏—Å–∫–µ:**
   - –í–≤–æ–¥: `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π 350`
   - –ò–∑–≤–ª–µ–∫–∞–µ–º –æ–ø–∏—Å–∞–Ω–∏–µ: `"–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"`
   - –î–ª—è –∫–∞–∂–¥–æ–≥–æ saved keyword –≤—ã—á–∏—Å–ª—è–µ–º **similarity score**
   - –ï—Å–ª–∏ similarity > 80% ‚Üí —Å—á–∏—Ç–∞–µ–º —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ–º
   - –ü—Ä–∏–º–µ–Ω—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é

#### –ê–ª–≥–æ—Ä–∏—Ç–º—ã similarity

**–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:** `rapidfuzz` (–±—ã—Å—Ç—Ä–µ–µ —á–µ–º `fuzzywuzzy`)

**–ú–µ—Ç—Ä–∏–∫–∏:**
- `fuzz.ratio()` - –±–∞–∑–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
- `fuzz.partial_ratio()` - —á–∞—Å—Ç–∏—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ
- `fuzz.token_sort_ratio()` - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –ø–æ—Ä—è–¥–æ–∫ —Å–ª–æ–≤

#### –ü—Ä–∏–º–µ—Ä—ã

| –ù–æ–≤—ã–π –≤–≤–æ–¥ | Saved keyword | Similarity | –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ? |
|------------|---------------|------------|-------------|
| `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π` | `—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π` | 100% | ‚úÖ –î–ê |
| `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ` | `—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π` | 85% | ‚úÖ –î–ê (> 80%) |
| `–°–∞—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π` | `—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π` | 95% | ‚úÖ –î–ê (–æ–ø–µ—á–∞—Ç–∫–∞) |
| `–¢–µ—Å—Ç` | `–¥–æ–ª–≥ –∑–∞ —Ç–µ—Å—Ç` | 35% | ‚ùå –ù–ï–¢ (< 80%) |
| `–í–æ–¥–∏—Ü–∞` | `–≤–æ–¥–∏—Ü–∞ –±—É—Ç–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è` | 65% | ‚ùå –ù–ï–¢ (< 80%) |

#### –ü–ª—é—Å—ã

- ‚úÖ **–ì–∏–±–∫–æ**: –ø—Ä–æ—â–∞–µ—Ç –æ–ø–µ—á–∞—Ç–∫–∏ –∏ –≤–∞—Ä–∏–∞—Ü–∏–∏
- ‚úÖ **–£–º–Ω–æ**: `"–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ"` ‚âà `"–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"`
- ‚úÖ **UX**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–µ –Ω—É–∂–Ω–æ –≤–≤–æ–¥–∏—Ç—å —Ç–æ—á–Ω–æ
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è**: —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ —Ñ—Ä–∞–∑–∞–º–∏

#### –ú–∏–Ω—É—Å—ã

- ‚ùå **–°–ª–æ–∂–Ω–µ–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å** (–Ω—É–∂–Ω–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `rapidfuzz`)
- ‚ùå **–ú–µ–¥–ª–µ–Ω–Ω–µ–µ**: –Ω—É–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å–æ –≤—Å–µ–º–∏ saved keywords
- ‚ùå **–ù—É–∂–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–∞** (80%? 85%? 75%?)
- ‚ùå **–ú–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å –ª–æ–∂–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è** –ø—Ä–∏ –Ω–∏–∑–∫–æ–º –ø–æ—Ä–æ–≥–µ
- ‚ùå **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏**

#### –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

- **–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 3-4 —á–∞—Å–∞
- **–†–∏—Å–∫–∏:** –°—Ä–µ–¥–Ω–∏–µ (–Ω—É–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä–æ–≥ similarity)
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –¢—Ä–µ–±—É–µ—Ç –º–Ω–æ–≥–æ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∫–µ–π—Å–æ–≤

---

### –í–∞—Ä–∏–∞–Ω—Ç C: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)

#### –û–ø–∏—Å–∞–Ω–∏–µ

–ö–æ–º–±–∏–Ω–∞—Ü–∏—è **—Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è** –∏ **—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–æ –Ω–∞—á–∞–ª—É —Ñ—Ä–∞–∑—ã** –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫.

#### –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ü—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏:**
   - –¢–æ –∂–µ —á—Ç–æ –≤ –í–∞—Ä–∏–∞–Ω—Ç–µ A (—Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å—é —Ñ—Ä–∞–∑—É)

2. **–ü—Ä–∏ –ø–æ–∏—Å–∫–µ (3 —É—Ä–æ–≤–Ω—è –ø—Ä–æ–≤–µ—Ä–∫–∏):**

   **–£—Ä–æ–≤–µ–Ω—å 1: –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π —Ñ—Ä–∞–∑—ã**
   - –í–≤–æ–¥: `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π 350`
   - –ò—â–µ–º: `"—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"` (—Ç–æ—á–Ω–æ–µ)
   - –ï—Å–ª–∏ –Ω–∞—à–ª–∏ ‚úÖ ‚Üí –ø—Ä–∏–º–µ–Ω—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é

   **–£—Ä–æ–≤–µ–Ω—å 2: –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–∞—á–∞–ª–∞ —Ñ—Ä–∞–∑—ã (–ø–µ—Ä–≤—ã–µ N —Å–ª–æ–≤)**
   - –ò–∑–≤–ª–µ–∫–∞–µ–º –ø–µ—Ä–≤—ã–µ 2-3 —Å–ª–æ–≤–∞: `"—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ"`
   - –ò—â–µ–º saved keywords –∫–æ—Ç–æ—Ä—ã–µ **–Ω–∞—á–∏–Ω–∞—é—Ç—Å—è** —Å —ç—Ç–æ–π —Ñ—Ä–∞–∑—ã
   - –ü—Ä–∏–º–µ—Ä: `"—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"` –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `"—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ"` ‚úÖ
   - –ï—Å–ª–∏ –Ω–∞—à–ª–∏ ‚úÖ ‚Üí –ø—Ä–∏–º–µ–Ω—è–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏—é

   **–£—Ä–æ–≤–µ–Ω—å 3: AI –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è**
   - –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞—à–ª–∏ ‚Üí –≤—ã–∑—ã–≤–∞–µ–º AI

#### –ü—Ä–∏–º–µ—Ä—ã

| –ù–æ–≤—ã–π –≤–≤–æ–¥ | Saved keyword | –£—Ä–æ–≤–µ–Ω—å 1 | –£—Ä–æ–≤–µ–Ω—å 2 | –†–µ–∑—É–ª—å—Ç–∞—Ç |
|------------|---------------|-----------|-----------|-----------|
| `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π 350` | `—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π` | ‚úÖ –¢–æ—á–Ω–æ–µ | - | ‚úÖ –ü—Ä–∏–º–µ–Ω—è–µ–º |
| `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ 390` | `—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π` | ‚ùå | ‚úÖ –ù–∞—á–∞–ª–æ | ‚úÖ –ü—Ä–∏–º–µ–Ω—è–µ–º |
| `–°–æ—Å–∏—Å–∫–∞ 200` | `—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ` | ‚ùå | ‚ùå | ‚Üí AI |
| `–¢–µ—Å—Ç 500` | `–¥–æ–ª–≥ –∑–∞ —Ç–µ—Å—Ç` | ‚ùå | ‚ùå | ‚Üí AI |
| `–î–æ–ª–≥ –∑–∞ —Ç–µ—Å—Ç 500` | `–¥–æ–ª–≥ –∑–∞ —Ç–µ—Å—Ç` | ‚úÖ –¢–æ—á–Ω–æ–µ | - | ‚úÖ –ü—Ä–∏–º–µ–Ω—è–µ–º |
| `–í–æ–¥–∏—Ü–∞ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É` | `–≤–æ–¥–∏—Ü–∞` | ‚ùå | ‚ùå | ‚Üí AI |

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏

```python
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–æ –Ω–∞—á–∞–ª—É
MIN_WORDS_FOR_PREFIX_MATCH = 2  # –ú–∏–Ω–∏–º—É–º 2 —Å–ª–æ–≤–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
MAX_WORDS_FOR_PREFIX_MATCH = 3  # –ú–∞–∫—Å–∏–º—É–º –ø–µ—Ä–≤—ã–µ 3 —Å–ª–æ–≤–∞
```

#### –ü–ª—é—Å—ã

- ‚úÖ **–ü—Ä–æ—Å—Ç–æ–π –∏ –±—ã—Å—Ç—Ä—ã–π** (–Ω–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫)
- ‚úÖ **–ì–∏–±–∫–∏–π**: —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤–∞—Ä–∏–∞—Ü–∏–π (`"–∏ —á–∞–π"`, `"—Å –∫–æ—Ñ–µ"`)
- ‚úÖ **–ù–µ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π** –Ω–∞ –æ–¥–∏–Ω–æ—á–Ω—ã–µ —Å–ª–æ–≤–∞
- ‚úÖ **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è**: O(log N) –ø–æ–∏—Å–∫ –≤ –ë–î

#### –ú–∏–Ω—É—Å—ã

- ‚ùå **–ù–µ –ø—Ä–æ—â–∞–µ—Ç –æ–ø–µ—á–∞—Ç–∫–∏**: `"–°–∞—Å–∏—Å–∫–∞"` ‚â† `"–°–æ—Å–∏—Å–∫–∞"`
- ‚ùå **–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–≥–æ –Ω–∞—á–∞–ª–∞**: `"–í–∫—É—Å–Ω–∞—è —Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ"` ‚â† `"–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ"`
- ‚ùå **–ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å** –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤ –¥–ª—è —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è

#### –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏

- **–í—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 2-3 —á–∞—Å–∞
- **–†–∏—Å–∫–∏:** –ù–∏–∑–∫–∏–µ
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –°—Ä–µ–¥–Ω–µ–µ (–Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ N)

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –í–∞—Ä–∏–∞–Ω—Ç C: –ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞:**

1. ‚úÖ **–ë–∞–ª–∞–Ω—Å –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ –≥–∏–±–∫–æ—Å—Ç–∏**
   - –ù–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –õ–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
   - –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–º–Ω—ã–π –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∫–µ–π—Å–æ–≤

2. ‚úÖ **–†–µ—à–∞–µ—Ç 95% –ø—Ä–æ–±–ª–µ–º**
   - `"–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ"` ‚â† `"–¢–µ—Å—Ç"` ‚úÖ (–Ω–µ—Ç –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π)
   - `"–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"` ‚âà `"–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ"` ‚úÖ (—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤–∞—Ä–∏–∞—Ü–∏–π)
   - `"–í–æ–¥–∏—Ü–∞ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É"` ‚â† `"–í–æ–¥–∏—Ü–∞"` ‚Üí AI ‚úÖ (–∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è)

3. ‚úÖ **–ë—ã—Å—Ç—Ä–æ —Ä–∞–±–æ—Ç–∞–µ—Ç**
   - –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ: O(1) –∏–Ω–¥–µ–∫—Å –≤ –ë–î
   - –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–∞—á–∞–ª–∞: O(log N) LIKE –∑–∞–ø—Ä–æ—Å
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ AI

4. ‚úÖ **–õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –≤ –±—É–¥—É—â–µ–º**
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å fuzzy matching (–í–∞—Ä–∏–∞–Ω—Ç B) –∫–∞–∫ Level 3
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω–æ–Ω–∏–º—ã
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å stemming –¥–ª—è —Å–∫–ª–æ–Ω–µ–Ω–∏–π

---

## üìù –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –£–¢–û–ß–ù–ï–ù–ò–Ø –û–¢ –í–õ–ê–î–ï–õ–¨–¶–ê –ü–†–û–ï–ö–¢–ê

**–ß–¢–û –í–ù–ï–î–†–Ø–ï–ú:**
1. ‚úÖ –ï–¥–∏–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ (lowercase, trim, –ø—Ä–æ–±–µ–ª—ã)
2. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ü–û–õ–ù–û–ô —Ñ—Ä–∞–∑—ã –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–ª–æ–≤
3. ‚úÖ –ü–æ–∏—Å–∫: Exact + Prefix matching (–í–∞—Ä–∏–∞–Ω—Ç C)
4. ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å–ª–æ–≤: **‚â•3 —Å–∏–º–≤–æ–ª–∞** (–Ω–µ 4!)
5. ‚úÖ **–£–ù–ò–§–ò–ö–ê–¶–ò–Ø —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –¥–æ—Ö–æ–¥–æ–≤** - –æ–¥–∏–Ω –∫–æ–¥ –¥–ª—è –æ–±–æ–∏—Ö —Ç–∏–ø–æ–≤

**–ß–¢–û –ù–ï –í–ù–ï–î–†–Ø–ï–ú:**
- ‚ùå –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫) - –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- ‚ùå –ß–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö keywords - –º–∞–ª–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –º–∞–ª–æ –∏—Å—Ç–æ—Ä–∏–∏
- ‚ùå –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–¥–∏–Ω–æ—á–Ω—ã—Ö —Å–ª–æ–≤ - —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –∫–∞–∫ –µ—Å—Ç—å
- ‚ùå –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - –Ω–µ –Ω—É–∂–Ω–æ
- ‚ùå –í–µ—Å–∞ –∏ shared keywords - –Ω–µ –Ω—É–∂–Ω–æ
- ‚ùå **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —è–∑—ã–∫—É** - –ø–æ–ª–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î, –Ω–æ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–¥–µ

**–ö–ê–°–ö–ê–î –ö–ê–¢–ï–ì–û–†–ò–ó–ê–¶–ò–ò (3 —É—Ä–æ–≤–Ω—è):**
1. –°–ª–æ–≤–∞—Ä—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (keywords) ‚Üê **–ú–´ –†–ê–ë–û–¢–ê–ï–ú –¢–û–õ–¨–ö–û –ù–ê–î –≠–¢–ò–ú**
2. –•–∞—Ä–¥–∫–æ–¥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
3. AI –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è

---

### üéØ –≠—Ç–∞–ø 0: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –¥–æ—Ö–æ–¥–æ–≤ (–ù–û–í–û–ï!)

**–ü–†–û–ë–õ–ï–ú–ê:** –°–µ–π—á–∞—Å –ª–æ–≥–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è keywords –†–ê–ó–ù–ê–Ø –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –¥–æ—Ö–æ–¥–æ–≤:

- **–†–∞—Å—Ö–æ–¥—ã:** `learn_keywords_on_create()` - –¥—É–±–ª–∏—Ä—É–µ—Ç –∫–æ–¥, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç spellchecker
- **–î–æ—Ö–æ–¥—ã:** `learn_income_keywords_on_create()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç helper `ensure_unique_income_keyword()`

**–†–ï–®–ï–ù–ò–ï:** –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π –º–æ–¥—É–ª—å —Å –æ–±—â–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –¥–ª—è –æ–±–æ–∏—Ö —Ç–∏–ø–æ–≤.

#### –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª: `bot/utils/keyword_service.py`

```python
"""
–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å keywords —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –¥–æ—Ö–æ–¥–æ–≤.
–ï–¥–∏–Ω—ã–π –∫–æ–¥ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è, –ø–æ–∏—Å–∫–∞ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ keywords.
"""
import re
import logging
from typing import List, Union, Tuple, Optional

logger = logging.getLogger(__name__)


def normalize_keyword_text(text: str) -> str:
    """
    –ï–¥–∏–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –¥–ª—è keywords.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ò –ø—Ä–∏ –ø–æ–∏—Å–∫–µ.

    Args:
        text: –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç (description –∏–ª–∏ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å)

    Returns:
        –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (lowercase, trim, –±–µ–∑ –ø—É–Ω–∫—Ç—É–∞—Ü–∏–∏/—ç–º–æ–¥–∑–∏)

    Examples:
        >>> normalize_keyword_text("  –°–æ—Å–∏—Å–∫–∞ –≤ –¢–ï–°–¢–ï –∏ —á–∞–π  ")
        "—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"
        >>> normalize_keyword_text("–ö–æ—Ñ–µ, —á–∞–π")
        "–∫–æ—Ñ–µ —á–∞–π"
        >>> normalize_keyword_text("üçï –ü–∏—Ü—Ü–∞!")
        "–ø–∏—Ü—Ü–∞"
    """
    if not text:
        return ""

    # 1. Lowercase
    normalized = text.lower()

    # 2. –£–¥–∞–ª—è–µ–º —ç–º–æ–¥–∑–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ–º –≥–æ—Ç–æ–≤—É—é —É—Ç–∏–ª–∏—Ç—É –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞)
    try:
        from bot.utils.emoji_utils import EMOJI_PREFIX_RE
        normalized = EMOJI_PREFIX_RE.sub('', normalized)
    except ImportError:
        # Fallback: –ø—Ä–æ—Å—Ç–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —ç–º–æ–¥–∑–∏ —á–µ—Ä–µ–∑ regex
        import re
        emoji_pattern = re.compile(
            "["
            "\U0001F600-\U0001F64F"  # —ç–º–æ—Ü–∏–∏
            "\U0001F300-\U0001F5FF"  # —Å–∏–º–≤–æ–ª—ã
            "\U0001F680-\U0001F6FF"  # —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç
            "\U0001F1E0-\U0001F1FF"  # —Ñ–ª–∞–≥–∏
            "\U00002700-\U000027BF"  # —Ä–∞–∑–Ω–æ–µ
            "]+",
            flags=re.UNICODE
        )
        normalized = emoji_pattern.sub('', normalized)

    # 3. –£–¥–∞–ª—è–µ–º –ø—É–Ω–∫—Ç—É–∞—Ü–∏—é (–∫—Ä–æ–º–µ –¥–µ—Ñ–∏—Å–∞ –≤–Ω—É—Ç—Ä–∏ —Å–ª–æ–≤)
    import re
    # –û—Å—Ç–∞–≤–ª—è–µ–º –±—É–∫–≤—ã (–∫–∏—Ä–∏–ª–ª–∏—Ü–∞ + –ª–∞—Ç–∏–Ω–∏—Ü–∞), —Ü–∏—Ñ—Ä—ã, –ø—Ä–æ–±–µ–ª—ã, –¥–µ—Ñ–∏—Å
    normalized = re.sub(r'[^\w\s\-]', ' ', normalized, flags=re.UNICODE)
    # –£–¥–∞–ª—è–µ–º –¥–µ—Ñ–∏—Å—ã –Ω–∞ –≥—Ä–∞–Ω–∏—Ü–∞—Ö —Å–ª–æ–≤ (–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏)
    normalized = re.sub(r'(?<!\w)-|-(?!\w)', ' ', normalized)

    # 4. Trim + —Å—Ö–ª–æ–ø—ã–≤–∞–Ω–∏–µ –ø—Ä–æ–±–µ–ª–æ–≤
    normalized = ' '.join(normalized.split())

    return normalized


def ensure_unique_keyword(
    profile,  # Profile
    category,  # Union[ExpenseCategory, IncomeCategory]
    word: str,
    is_income: bool = False
) -> Tuple[Union['CategoryKeyword', 'IncomeCategoryKeyword'], bool, int]:
    """
    –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ keywords.
    –†–∞–±–æ—Ç–∞–µ—Ç –∏ –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤ (CategoryKeyword), –∏ –¥–ª—è –¥–æ—Ö–æ–¥–æ–≤ (IncomeCategoryKeyword).

    –í–ê–ñ–ù–û: –û–¥–Ω–æ —Å–ª–æ–≤–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –≤ –û–î–ù–û–ô –∫–∞—Ç–µ–≥–æ—Ä–∏–∏!

    –ê–ª–≥–æ—Ä–∏—Ç–º:
    1. –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç —Å–ª–æ–≤–æ
    2. –£–î–ê–õ–Ø–ï–¢ —Å–ª–æ–≤–æ –∏–∑ –í–°–ï–• –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ä–∞—Å—Ö–æ–¥–æ–≤ –∏–ª–∏ –¥–æ—Ö–æ–¥–æ–≤)
    3. –°–æ–∑–¥–∞–µ—Ç/–ø–æ–ª—É—á–∞–µ—Ç —Å–ª–æ–≤–æ –≤ —Ü–µ–ª–µ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    4. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç (keyword, created, removed_count)

    Args:
        profile: –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        category: –¶–µ–ª–µ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è (ExpenseCategory –∏–ª–∏ IncomeCategory)
        word: –ö–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ
        is_income: True –¥–ª—è –¥–æ—Ö–æ–¥–æ–≤, False –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤

    Returns:
        (keyword, created, removed_count):
            - keyword: –æ–±—ä–µ–∫—Ç CategoryKeyword –∏–ª–∏ IncomeCategoryKeyword
            - created: True –µ—Å–ª–∏ —Å–ª–æ–≤–æ —Å–æ–∑–¥–∞–Ω–æ, False –µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ
            - removed_count: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

    Note:
        –ü–æ–ª–µ 'language' –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è —Ç.–∫. –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏.
        CategoryKeyword –∏–º–µ–µ—Ç —ç—Ç–æ –ø–æ–ª–µ –≤ —Å—Ö–µ–º–µ, –Ω–æ –∫–æ–¥ –µ–≥–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç.
        IncomeCategoryKeyword –≤–æ–æ–±—â–µ –Ω–µ –∏–º–µ–µ—Ç –ø–æ–ª—è language.
    """
    from expenses.models import CategoryKeyword, IncomeCategoryKeyword

    # –í—ã–±–∏—Ä–∞–µ–º –º–æ–¥–µ–ª—å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
    KeywordModel = IncomeCategoryKeyword if is_income else CategoryKeyword

    # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º —Å–ª–æ–≤–æ
    normalized_word = normalize_keyword_text(word)

    if not normalized_word or len(normalized_word) < 3:
        # –°–æ–∑–¥–∞–µ–º –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ (–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î)
        logger.debug(f"Keyword too short: '{normalized_word}', skipping")
        return None, False, 0

    # –û–ì–†–ê–ù–ò–ß–ï–ù–ò–ï max_length=100 (CategoryKeyword.keyword / IncomeCategoryKeyword.keyword)
    # –û–±—Ä–µ–∑–∞–µ–º –ø–æ —Å–ª–æ–≤–∞–º, —á—Ç–æ–±—ã –Ω–µ —Ä–∞–∑—Ä—ã–≤–∞—Ç—å —Å–ª–æ–≤–∞ –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ
    if len(normalized_word) > 100:
        # –û–±—Ä–µ–∑–∞–µ–º –¥–æ 100 —Å–∏–º–≤–æ–ª–æ–≤
        truncated = normalized_word[:100]
        # –ù–∞—Ö–æ–¥–∏–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –ø—Ä–æ–±–µ–ª, —á—Ç–æ–±—ã –Ω–µ —Ä–∞–∑—Ä—ã–≤–∞—Ç—å —Å–ª–æ–≤–æ
        last_space = truncated.rfind(' ')
        if last_space > 0:
            normalized_word = truncated[:last_space].strip()
        else:
            # –ï—Å–ª–∏ –Ω–µ—Ç –ø—Ä–æ–±–µ–ª–æ–≤ - –æ–±—Ä–µ–∑–∞–µ–º –∂–µ—Å—Ç–∫–æ
            normalized_word = truncated.strip()

        logger.debug(
            f"Keyword truncated from {len(word)} to {len(normalized_word)} chars: "
            f"'{normalized_word}...'"
        )

    # –°–¢–†–û–ì–ê–Ø –£–ù–ò–ö–ê–õ–¨–ù–û–°–¢–¨: —É–¥–∞–ª—è–µ–º —Å–ª–æ–≤–æ –∏–∑ –í–°–ï–• –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    # –ë–ï–ó —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —è–∑—ã–∫—É - —Ç.–∫. –ø–æ–ª–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ production –∫–æ–¥–µ
    deleted = KeywordModel.objects.filter(
        category__profile=profile,
        keyword=normalized_word
    ).delete()

    removed_count = deleted[0] if deleted else 0

    if removed_count > 0:
        logger.debug(
            f"Removed keyword '{normalized_word}' from {removed_count} "
            f"{'income' if is_income else 'expense'} categories to maintain uniqueness"
        )

    # –°–æ–∑–¥–∞–µ–º/–ø–æ–ª—É—á–∞–µ–º keyword –≤ —Ü–µ–ª–µ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
    # –ë–ï–ó —É–∫–∞–∑–∞–Ω–∏—è —è–∑—ã–∫–∞ - –ø–æ–ª–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
    keyword, created = KeywordModel.objects.get_or_create(
        category=category,
        keyword=normalized_word,
        defaults={'usage_count': 0}
    )

    return keyword, created, removed_count


def match_keyword_in_text(
    keyword: str,
    text: str,
    min_words: int = 2,
    max_prefix_words: int = 3
) -> Tuple[bool, str]:
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ keyword —Å —Ç–µ–∫—Å—Ç–æ–º (3 —É—Ä–æ–≤–Ω—è).

    –£—Ä–æ–≤–Ω–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏:
    1. –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π —Ñ—Ä–∞–∑—ã
    2. –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–∞—á–∞–ª–∞ —Ñ—Ä–∞–∑—ã (–ø–µ—Ä–≤—ã–µ 2-3 —Å–ª–æ–≤–∞, –µ—Å–ª–∏ >= 2 —Å–ª–æ–≤)
    3. –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–æ —Å–∫–ª–æ–Ω–µ–Ω–∏—è–º–∏ (–¥–ª—è –æ–¥–∏–Ω–æ—á–Ω—ã—Ö keywords >= 4 —Å–∏–º–≤–æ–ª–æ–≤ —Å –õ–Æ–ë–´–ú —Å–ª–æ–≤–æ–º —Ç–µ–∫—Å—Ç–∞)

    Args:
        keyword: –°–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π keyword (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π)
        text: –¢–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ (–±—É–¥–µ—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω)
        min_words: –ú–∏–Ω–∏–º—É–º —Å–ª–æ–≤ –¥–ª—è prefix matching (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 2)
        max_prefix_words: –ú–∞–∫—Å–∏–º—É–º —Å–ª–æ–≤ –¥–ª—è prefix (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3)

    Returns:
        (matched, match_type):
            - matched: True –µ—Å–ª–∏ –µ—Å—Ç—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ, False –∏–Ω–∞—á–µ
            - match_type: "exact", "prefix", "inflection", –∏–ª–∏ "none"

    Examples:
        >>> match_keyword_in_text("—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π", "–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π 390")
        (True, "prefix")  # –ø–µ—Ä–≤—ã–µ 3 —Å–ª–æ–≤–∞ —Å–æ–≤–ø–∞–¥–∞—é—Ç
        >>> match_keyword_in_text("–∑–∞—Ä–ø–ª–∞—Ç–∞", "–º–Ω–µ –ø–µ—Ä–µ–≤–µ–ª–∏ –∑–∞—Ä–ø–ª–∞—Ç—É")
        (True, "inflection")  # —Å–∫–ª–æ–Ω–µ–Ω–∏–µ —Å –õ–Æ–ë–´–ú —Å–ª–æ–≤–æ–º —Ç–µ–∫—Å—Ç–∞
        >>> match_keyword_in_text("–¥–æ–ª–≥ –∑–∞ —Ç–µ—Å—Ç", "–¢–µ—Å—Ç 500")
        (False, "none")  # –Ω–∞—á–∞–ª–æ –ù–ï —Å–æ–≤–ø–∞–¥–∞–µ—Ç
    """
    # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –æ–±–∞ —Ç–µ–∫—Å—Ç–∞
    normalized_keyword = normalize_keyword_text(keyword)
    normalized_text = normalize_keyword_text(text)

    if not normalized_keyword or not normalized_text:
        return False, "none"

    # –ó–ê–©–ò–¢–ê: –ú–∏–Ω–∏–º—É–º 3 —Å–∏–º–≤–æ–ª–∞ –¥–ª—è keyword
    if len(normalized_keyword) < 3:
        return False, "none"

    # –£–†–û–í–ï–ù–¨ 1: –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π —Ñ—Ä–∞–∑—ã
    if normalized_text == normalized_keyword:
        return True, "exact"

    text_words = normalized_text.split()
    keyword_words = normalized_keyword.split()

    # –£–†–û–í–ï–ù–¨ 2: –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–∞—á–∞–ª–∞ —Ñ—Ä–∞–∑—ã (–ø–µ—Ä–≤—ã–µ 2-3 —Å–ª–æ–≤–∞)
    if len(text_words) >= min_words and len(keyword_words) >= min_words:
        prefix_length = min(max_prefix_words, len(text_words), len(keyword_words))
        text_prefix = ' '.join(text_words[:prefix_length])
        keyword_prefix = ' '.join(keyword_words[:prefix_length])

        if len(text_prefix) >= 3 and text_prefix == keyword_prefix:
            return True, "prefix"

    # –£–†–û–í–ï–ù–¨ 3: –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Å–æ —Å–∫–ª–æ–Ω–µ–Ω–∏—è–º–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –æ–¥–∏–Ω–æ—á–Ω—ã—Ö keywords)
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∫–ª–æ–Ω–µ–Ω–∏–µ —Å –õ–Æ–ë–´–ú —Å–ª–æ–≤–æ–º —Ç–µ–∫—Å—Ç–∞ >= 4 —Å–∏–º–≤–æ–ª–æ–≤
    # –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç "–∑–∞—Ä–ø–ª–∞—Ç–∞" –º–∞—Ç—á–∏—Ç—å "–ø–µ—Ä–µ–≤–µ–ª–∏ –∑–∞—Ä–ø–ª–∞—Ç—É" –∏–ª–∏ "–∑–∞—Ä–ø–ª–∞—Ç–∞ –æ—Ç –∫–æ–º–ø–∞–Ω–∏–∏"
    if len(keyword_words) == 1 and len(normalized_keyword) >= 4:
        for text_word in text_words:
            if len(text_word) >= 4:
                # –ë–µ—Ä–µ–º –û–°–ù–û–í–£ —Å–ª–æ–≤–∞ (–±–µ–∑ –æ–∫–æ–Ω—á–∞–Ω–∏—è)
                min_len = min(len(normalized_keyword), len(text_word))
                stem_len = max(4, min_len - 2)

                # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –æ—Å–Ω–æ–≤—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç
                keyword_stem = normalized_keyword[:stem_len]
                text_stem = text_word[:stem_len]

                if keyword_stem == text_stem:
                    # –†–∞–∑–Ω–∏—Ü–∞ –≤ –¥–ª–∏–Ω–µ –Ω–µ –±–æ–ª—å—à–µ 2 —Å–∏–º–≤–æ–ª–æ–≤ (–æ–∫–æ–Ω—á–∞–Ω–∏–µ)
                    diff = abs(len(normalized_keyword) - len(text_word))
                    if diff <= 2:
                        return True, "inflection"

    return False, "none"
```

#### –û–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª: `expense_bot/celery_tasks.py`

**–ò–∑–º–µ–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏:**

1. `learn_keywords_on_create()` - –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 1380-1464)
2. `update_keywords_weights()` - –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 1250-1330)
3. `learn_income_keywords_on_create()` - –¥–ª—è –¥–æ—Ö–æ–¥–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 1733-1806)
4. `update_income_keywords()` - –¥–ª—è –¥–æ—Ö–æ–¥–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 1668-1729)

**–ù–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–ø—Ä–∏–º–µ—Ä –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤):**

```python
@shared_task
def learn_keywords_on_create(expense_id: int, category_id: int):
    """
    –û–±—É—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π —Ç—Ä–∞—Ç—ã —Å AI-–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π.
    –ò–°–ü–û–õ–¨–ó–£–ï–¢ –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–´–ô –ö–û–î –∏–∑ keyword_service.py
    """
    try:
        from expenses.models import Expense, ExpenseCategory
        from bot.utils.keyword_service import normalize_keyword_text, ensure_unique_keyword

        expense = Expense.objects.select_related('profile', 'category').get(id=expense_id)
        category = expense.category

        if not category:
            return

        # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º description –∫–∞–∫ –¶–ï–õ–£–Æ –§–†–ê–ó–£
        keyword = normalize_keyword_text(expense.description)

        if not keyword or len(keyword) < 3:
            logger.info(f"Keyword too short for expense {expense_id}, skipping")
            return

        # –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–ê–Ø —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ (–ë–ï–ó —è–∑—ã–∫–∞ - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
        kw_obj, created, removed = ensure_unique_keyword(
            profile=expense.profile,
            category=category,
            word=keyword,
            is_income=False  # ‚Üê —Ä–∞—Å—Ö–æ–¥—ã
        )

        if not kw_obj:
            return

        # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
        kw_obj.usage_count += 1
        kw_obj.save()

        logger.info(
            f"Learned keyword '{keyword}' for expense category '{category.name_ru}' "
            f"(user {expense.profile.telegram_id}, removed {removed} duplicates)"
        )

    except Exception as e:
        logger.error(f"Error in learn_keywords_on_create: {e}")


@shared_task
def learn_income_keywords_on_create(income_id: int):
    """
    –û–±—É—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –¥–æ—Ö–æ–¥–∞ —Å AI-–∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π.
    –ò–°–ü–û–õ–¨–ó–£–ï–¢ –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–´–ô –ö–û–î –∏–∑ keyword_service.py
    """
    try:
        from expenses.models import Income
        from bot.utils.keyword_service import normalize_keyword_text, ensure_unique_keyword

        income = Income.objects.select_related('profile', 'category').get(id=income_id)

        if not income.ai_categorized or not income.category:
            return

        category = income.category

        # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º description –∫–∞–∫ –¶–ï–õ–£–Æ –§–†–ê–ó–£
        keyword = normalize_keyword_text(income.description)

        if not keyword or len(keyword) < 3:
            logger.info(f"Keyword too short for income {income_id}, skipping")
            return

        # –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–ê–Ø —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ (–ë–ï–ó —è–∑—ã–∫–∞ - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
        kw_obj, created, removed = ensure_unique_keyword(
            profile=income.profile,
            category=category,
            word=keyword,
            is_income=True  # ‚Üê –¥–æ—Ö–æ–¥—ã
        )

        if not kw_obj:
            return

        # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á–µ—Ç—á–∏–∫
        kw_obj.usage_count += 1
        kw_obj.save()

        logger.info(
            f"Learned keyword '{keyword}' for income category '{category.name}' "
            f"(user {income.profile.telegram_id}, removed {removed} duplicates)"
        )

    except Exception as e:
        logger.error(f"Error in learn_income_keywords_on_create: {e}")
```

**–ò–¢–û–ì –≠–¢–ê–ü–ê 0:**
- ‚úÖ –û–¥–∏–Ω —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–¥ –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –¥–æ—Ö–æ–¥–æ–≤
- ‚úÖ –ï–¥–∏–Ω–∞—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏
- ‚úÖ –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- ‚úÖ **–ë–ï–ó –æ–±—Ä–∞–±–æ—Ç–∫–∏ —è–∑—ã–∫–∞** - –ø–æ–ª–µ `language` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ production –∫–æ–¥–µ
- ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–º—É –ø–æ–≤–µ–¥–µ–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã

---

### –≠—Ç–∞–ø 1: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞ keywords

**–§–∞–π–ª:** `bot/utils/expense_parser.py`
**–§—É–Ω–∫—Ü–∏—è:** `parse_expense_message()`
**–°—Ç—Ä–æ–∫–∏:** ~810-837

#### –¢–µ–∫—É—â–∏–π –∫–æ–¥ (–≤ expense_parser.py):

```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
keywords = await get_keywords()
for kw in keywords:
    # –ü–†–û–ë–õ–ï–ú–ê: –∏—â–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞ –≤ —Ç–µ–∫—Å—Ç–µ
    if keyword_matches_in_text(kw.keyword.lower(), text_for_keywords):
        category = get_category_display_name(user_cat, lang_code)
        max_score = 100
        break
```

#### –ù–æ–≤—ã–π –∫–æ–¥ (–ò–°–ü–û–õ–¨–ó–£–ï–¢ keyword_service.py):

```python
from bot.utils.keyword_service import match_keyword_in_text

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
keywords = await get_keywords()

for kw in keywords:
    # –ò–°–ü–û–õ–¨–ó–£–ï–ú –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–£–Æ —Ñ—É–Ω–∫—Ü–∏—é matching
    matched, match_type = match_keyword_in_text(
        keyword=kw.keyword,
        text=text_for_keywords
    )

    if matched:
        category = get_category_display_name(user_cat, lang_code)
        max_score = 100 if match_type == "exact" else 90
        logger.info(f"[KEYWORD MATCH] {match_type}: '{kw.keyword}' matched '{text_for_keywords}'")
        break

if category:
    break  # –ù–∞—à–ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—é, –≤—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
```

**–ò–¢–û–ì –≠–¢–ê–ü–ê 1:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è `match_keyword_in_text()` –∏–∑ `keyword_service.py`
- ‚úÖ –ï–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –¥–æ—Ö–æ–¥–æ–≤
- ‚úÖ 2 —É—Ä–æ–≤–Ω—è –ø—Ä–æ–≤–µ—Ä–∫–∏: exact + prefix

---

### –≠—Ç–∞–ø 2: –ó–∞–º–µ–Ω–∞ ALL –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π keyword_matches_in_text()

**–í–ê–ñ–ù–û:** –§—É–Ω–∫—Ü–∏—è `keyword_matches_in_text()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ **4 –º–µ—Å—Ç–∞—Ö** –≤ `expense_parser.py`:

1. **–°—Ç—Ä–æ–∫–∞ 798** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –†–ê–°–•–û–î–ù–û–ô –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
2. **–°—Ç—Ä–æ–∫–∞ 819** - –ü—Ä–æ–≤–µ—Ä–∫–∞ keywords –†–ê–°–•–û–î–û–í ‚Üê –ú–´ –£–ñ–ï –ú–ï–ù–Ø–õ–ò –í –≠–¢–ê–ü–ï 1
3. **–°—Ç—Ä–æ–∫–∞ 1270** - –ü—Ä–æ–≤–µ—Ä–∫–∞ keywords –î–û–•–û–î–û–í ‚Üê –¢–û–ñ–ï –ù–ê–î–û –ú–ï–ù–Ø–¢–¨!
4. **–°—Ç—Ä–æ–∫–∞ 1297** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–∑–≤–∞–Ω–∏—è –î–û–•–û–î–ù–û–ô –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**–î–µ–π—Å—Ç–≤–∏—è:**

#### 1. –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å—Ç—Ä–æ–∫–µ 798 (–Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏):
```python
# –ë–´–õ–û:
if keyword_matches_in_text(cat_name, text_for_keywords):

# –°–¢–ê–õ–û:
from bot.utils.keyword_service import match_keyword_in_text
matched, _ = match_keyword_in_text(cat_name, text_for_keywords)
if matched:
```

#### 2. –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å—Ç—Ä–æ–∫–µ 819 (keywords —Ä–∞—Å—Ö–æ–¥–æ–≤):
**–£–ñ–ï –ò–°–ü–†–ê–í–õ–ï–ù–û –í –≠–¢–ê–ü–ï 1** ‚úÖ

#### 3. –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å—Ç—Ä–æ–∫–µ 1270 (keywords –¥–æ—Ö–æ–¥–æ–≤):
```python
# –ë–´–õ–û:
if keyword_matches_in_text(keyword_obj.keyword.lower(), text_for_keywords):

# –°–¢–ê–õ–û:
from bot.utils.keyword_service import match_keyword_in_text
matched, _ = match_keyword_in_text(keyword_obj.keyword, text_for_keywords)
if matched:
```

#### 4. –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å—Ç—Ä–æ–∫–µ 1297 (–Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ—Ö–æ–¥–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏):
```python
# –ë–´–õ–û:
if cat_name_clean and keyword_matches_in_text(cat_name_clean, text_for_keywords):

# –°–¢–ê–õ–û:
from bot.utils.keyword_service import match_keyword_in_text
matched, _ = match_keyword_in_text(cat_name_clean, text_for_keywords)
if cat_name_clean and matched:
```

#### 5. –£–¥–∞–ª–∏—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à—É—é —Ñ—É–Ω–∫—Ü–∏—é:
- ‚ùå –£–¥–∞–ª–∏—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `keyword_matches_in_text()` –∏–∑ `expense_parser.py` (—Å—Ç—Ä–æ–∫–∏ 77-106)

#### 6. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
- ‚úÖ –ú–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Å—Ç–∞—Ä—É—é `ensure_unique_income_keyword()` –≤ `bot/services/income_categorization.py` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –∏–ª–∏ —É–¥–∞–ª–∏—Ç—å (–∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - –í–´–ü–û–õ–ù–ï–ù–û

**–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:** `test_keyword_matching_v2.py` (40 —Ç–µ—Å—Ç–æ–≤, –≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç ‚úÖ)

```python
"""
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ keyword matching (–í–∞—Ä–∏–∞–Ω—Ç C)
"""
from bot.utils.keyword_service import normalize_keyword_text, match_keyword_in_text

def test_normalization():
    """–¢–µ—Å—Ç –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞"""
    assert normalize_keyword_text("  –°–æ—Å–∏—Å–∫–∞ –≤ –¢–ï–°–¢–ï –∏ —á–∞–π  ") == "—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"
    assert normalize_keyword_text("–¢–µ—Å—Ç") == "—Ç–µ—Å—Ç"
    assert normalize_keyword_text("") == ""
    print("‚úÖ test_normalization passed")

def test_exact_match():
    """–¢–µ—Å—Ç —Ç–æ—á–Ω–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è"""
    # Exact match
    matched, match_type = match_keyword_in_text("—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π", "–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π")
    assert matched == True
    assert match_type == "exact"
    print("‚úÖ test_exact_match passed")

def test_prefix_match():
    """–¢–µ—Å—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –ø–æ –Ω–∞—á–∞–ª—É —Ñ—Ä–∞–∑—ã"""
    # Prefix match (–ø–µ—Ä–≤—ã–µ 3 —Å–ª–æ–≤–∞ —Å–æ–≤–ø–∞–¥–∞—é—Ç)
    matched, match_type = match_keyword_in_text(
        "—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π",  # saved keyword
        "–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ 390"     # user input
    )
    assert matched == True
    assert match_type == "prefix"
    print("‚úÖ test_prefix_match passed")

def test_no_match():
    """–¢–µ—Å—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è"""
    # No match - —Ä–∞–∑–Ω—ã–µ —Ñ—Ä–∞–∑—ã
    matched, match_type = match_keyword_in_text(
        "–¥–æ–ª–≥ –∑–∞ —Ç–µ—Å—Ç",  # saved keyword
        "–¢–µ—Å—Ç 500"       # user input - —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —Å–ª–æ–≤–æ
    )
    assert matched == False
    assert match_type == "none"
    print("‚úÖ test_no_match passed")

def test_short_word_protection():
    """–¢–µ—Å—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å–ª–æ–≤"""
    # –ù–µ –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å - –∑–∞—â–∏—Ç–∞ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ —É—Ä–æ–≤–Ω–µ min_words –≤ prefix matching
    # normalize_keyword_text("–≤") ‚Üí "–≤" (–∫–æ—Ä–æ—Ç–∫–æ–µ —Å–ª–æ–≤–æ –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏)
    # normalize_keyword_text("–≤ –º–∞–≥–∞–∑–∏–Ω–µ") ‚Üí "–≤ –º–∞–≥–∞–∑–∏–Ω–µ"
    # –ù–û: prefix matching —Ç—Ä–µ–±—É–µ—Ç >= 2 —Å–ª–æ–≤, –∞ "–≤" —ç—Ç–æ 1 —Å–ª–æ–≤–æ
    matched, match_type = match_keyword_in_text(
        "–≤",     # saved keyword (1 —Å–ª–æ–≤–æ - –Ω–µ –ø—Ä–æ–π–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É min_words)
        "–≤ –º–∞–≥–∞–∑–∏–Ω–µ"  # user input (2 —Å–ª–æ–≤–∞)
    )
    assert matched == False  # –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç –∏–∑-–∑–∞ min_words –∑–∞—â–∏—Ç—ã
    assert match_type == "none"
    print("‚úÖ test_short_word_protection passed")

if __name__ == "__main__":
    test_normalization()
    test_exact_match()
    test_prefix_match()
    test_no_match()
    test_short_word_protection()
    print("\nüéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã!")
```

**–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:**
```bash
python test_keyword_matching_v2.py
```

---

### ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ - –í–°–ï –ü–û–ö–†–´–¢–´

#### ‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 1: –¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ

**–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**
1. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç—Ä–∞—Ç—É: `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π 390` ‚Üí –ö–∞—Ñ–µ –∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã
2. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—Å—Ç keyword: `"—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"`

**–¢–µ—Å—Ç:**
- –í–≤–æ–¥: `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π 350`
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–∞—Ç–µ–≥–æ—Ä–∏—è `–ö–∞—Ñ–µ –∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã` ‚úÖ (—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ)
- **AI –≤—ã–∑–≤–∞–Ω:** ‚ùå –ù–ï–¢

---

#### ‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 2: –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–∞—á–∞–ª–∞ —Ñ—Ä–∞–∑—ã

**–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**
1. Keyword —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `"—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"` ‚Üí –ö–∞—Ñ–µ

**–¢–µ—Å—Ç:**
- –í–≤–æ–¥: `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ 400`
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–∞—Ç–µ–≥–æ—Ä–∏—è `–ö–∞—Ñ–µ –∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã` ‚úÖ (—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–µ—Ä–≤—ã—Ö 3 —Å–ª–æ–≤)
- **AI –≤—ã–∑–≤–∞–Ω:** ‚ùå –ù–ï–¢

---

#### ‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ù–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è ‚Üí AI

**–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**
1. Keyword —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `"—Å–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ –∏ —á–∞–π"` ‚Üí –ö–∞—Ñ–µ

**–¢–µ—Å—Ç:**
- –í–≤–æ–¥: `–°–æ—Å–∏—Å–∫–∞ 200`
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** AI –≤—ã–∑–≤–∞–Ω ‚úÖ
- **AI –¥–æ–ª–∂–µ–Ω –≤—ã–±—Ä–∞—Ç—å:** –ü—Ä–æ–¥—É–∫—Ç—ã (–∏–ª–∏ –¥—Ä—É–≥—É—é –ø–æ–¥—Ö–æ–¥—è—â—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é)

---

#### ‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ò–∑–±–µ–≥–∞–Ω–∏–µ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π

**–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**
1. Keyword —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `"–¥–æ–ª–≥ –∑–∞ —Ç–µ—Å—Ç"` ‚Üí –†–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏

**–¢–µ—Å—Ç 1:**
- –í–≤–æ–¥: `–¢–µ—Å—Ç 500`
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** AI –≤—ã–∑–≤–∞–Ω ‚úÖ (–Ω–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è, "—Ç–µ—Å—Ç" ‚â† "–¥–æ–ª–≥ –∑–∞ —Ç–µ—Å—Ç")

**–¢–µ—Å—Ç 2:**
- –í–≤–æ–¥: `–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ 390`
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** AI –≤—ã–∑–≤–∞–Ω ‚úÖ (–Ω–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è, "–≤ —Ç–µ—Å—Ç–µ" ‚â† "–¥–æ–ª–≥ –∑–∞ —Ç–µ—Å—Ç")

---

#### ‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 5: –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è (—Å inflection)

**–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**
1. Keyword —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `"–≤–æ–¥–∏—Ü–∞"` ‚Üí –ü—Ä–æ–¥—É–∫—Ç—ã

**–¢–µ—Å—Ç:**
- –í–≤–æ–¥: `–í–æ–¥–∏—Ü–∞ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É 150`
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–∞—Ç–µ–≥–æ—Ä–∏—è `–ü—Ä–æ–¥—É–∫—Ç—ã` ‚úÖ (inflection - "–≤–æ–¥–∏—Ü–∞" –º–∞—Ç—á–∏—Ç "–≤–æ–¥–∏—Ü–∞" –≤ —Ç–µ–∫—Å—Ç–µ)
- **AI –≤—ã–∑–≤–∞–Ω:** ‚ùå –ù–ï–¢ (keyword –Ω–∞–π–¥–µ–Ω —á–µ—Ä–µ–∑ inflection)

**–ü–æ—è—Å–Ω–µ–Ω–∏–µ:** –° —É—á–µ—Ç–æ–º –£–†–û–í–ù–Ø 3 (inflection —Å –õ–Æ–ë–´–ú —Å–ª–æ–≤–æ–º), –æ–¥–∏–Ω–æ—á–Ω–æ–µ —Å–ª–æ–≤–æ "–≤–æ–¥–∏—Ü–∞" (6 —Å–∏–º–≤–æ–ª–æ–≤) –º–∞—Ç—á–∏—Ç –ø–µ—Ä–≤–æ–µ —Å–ª–æ–≤–æ "–≤–æ–¥–∏—Ü–∞" –≤ —Ç–µ–∫—Å—Ç–µ "–≤–æ–¥–∏—Ü–∞ –Ω–∞ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É"

---

#### ‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 6: Inflection —Å –õ–Æ–ë–´–ú —Å–ª–æ–≤–æ–º —Ç–µ–∫—Å—Ç–∞ (–ë–ê–ì #2 - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω)

**–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:**
1. Keyword —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: `"–∑–∞—Ä–ø–ª–∞—Ç–∞"` ‚Üí –î–æ—Ö–æ–¥—ã

**–¢–µ—Å—Ç 1 - inflection —Å–æ –≤—Ç–æ—Ä—ã–º —Å–ª–æ–≤–æ–º:**
- –í–≤–æ–¥: `–º–Ω–µ –ø–µ—Ä–µ–≤–µ–ª–∏ –∑–∞—Ä–ø–ª–∞—Ç—É`
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–∞—Ç–µ–≥–æ—Ä–∏—è `–î–æ—Ö–æ–¥—ã` ‚úÖ (inflection - "–∑–∞—Ä–ø–ª–∞—Ç–∞" –º–∞—Ç—á–∏—Ç "–∑–∞—Ä–ø–ª–∞—Ç—É" –≤–æ –≤—Ç–æ—Ä–æ–º —Å–ª–æ–≤–µ)
- **AI –≤—ã–∑–≤–∞–Ω:** ‚ùå –ù–ï–¢ (keyword –Ω–∞–π–¥–µ–Ω —á–µ—Ä–µ–∑ inflection)

**–¢–µ—Å—Ç 2 - inflection —Å —Ç—Ä–µ—Ç—å–∏–º —Å–ª–æ–≤–æ–º:**
- –í–≤–æ–¥: `–ø–µ—Ä–µ–≤–µ–ª–∏ –∑–∞—Ä–ø–ª–∞—Ç—É –≤—á–µ—Ä–∞`
- **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–∞—Ç–µ–≥–æ—Ä–∏—è `–î–æ—Ö–æ–¥—ã` ‚úÖ (inflection - "–∑–∞—Ä–ø–ª–∞—Ç–∞" –º–∞—Ç—á–∏—Ç "–∑–∞—Ä–ø–ª–∞—Ç—É" –≤–æ –≤—Ç–æ—Ä–æ–º —Å–ª–æ–≤–µ)
- **AI –≤—ã–∑–≤–∞–Ω:** ‚ùå –ù–ï–¢ (keyword –Ω–∞–π–¥–µ–Ω —á–µ—Ä–µ–∑ inflection)

**–ü–æ—è—Å–Ω–µ–Ω–∏–µ:**
- **–î–û –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:** Inflection –ø—Ä–æ–≤–µ—Ä—è–ª—Å—è —Ç–æ–ª—å–∫–æ —Å –ü–ï–†–í–´–ú —Å–ª–æ–≤–æ–º —Ç–µ–∫—Å—Ç–∞ ‚Üí "–∑–∞—Ä–ø–ª–∞—Ç–∞" –ù–ï –º–∞—Ç—á–∏–ª–∞ "–º–Ω–µ –ø–µ—Ä–µ–≤–µ–ª–∏ –∑–∞—Ä–ø–ª–∞—Ç—É" ‚ùå
- **–ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:** Inflection –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å –õ–Æ–ë–´–ú —Å–ª–æ–≤–æ–º —Ç–µ–∫—Å—Ç–∞ >= 4 —Å–∏–º–≤–æ–ª–æ–≤ ‚Üí "–∑–∞—Ä–ø–ª–∞—Ç–∞" –º–∞—Ç—á–∏—Ç "–∑–∞—Ä–ø–ª–∞—Ç—É" –≤ –õ–Æ–ë–û–ô –ø–æ–∑–∏—Ü–∏–∏ ‚úÖ
- **Commit:** `c711d43` - "Fix inflection matching: check ANY word in text, not just first"

---

### –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑–º–µ—Ä–∏—Ç—å:

1. **–ß–∞—Å—Ç–æ—Ç–∞ –≤—ã–∑–æ–≤–∞ AI**
   - –î–æ: X% —Ç—Ä–∞—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å —á–µ—Ä–µ–∑ keywords
   - –ü–æ—Å–ª–µ: Y% —Ç—Ä–∞—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ keywords
   - –¶–µ–ª—å: Y –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∏–∂–µ, AI –¥–æ–ª–∂–µ–Ω –≤—ã–∑—ã–≤–∞—Ç—å—Å—è —á–∞—â–µ –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏

2. **–¢–æ—á–Ω–æ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏**
   - –ò–∑–º–µ—Ä–∏—Ç—å: —Å–∫–æ–ª—å–∫–æ —Ç—Ä–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏—Å–ø—Ä–∞–≤–ª—è—é—Ç –≤—Ä—É—á–Ω—É—é
   - –î–æ: Z% –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
   - –ü–æ—Å–ª–µ: < Z% –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
   - –¶–µ–ª—å: –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä—É—á–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

3. **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º—É—Å–æ—Ä–Ω—ã—Ö keywords**
   - –î–æ: N keywords –≤ –ë–î (–∏–∑ –Ω–∏—Ö M –æ–¥–∏–Ω–æ—á–Ω—ã—Ö —Å–ª–æ–≤)
   - –ü–æ—Å–ª–µ: K keywords –≤ –ë–î (—Ç–æ–ª—å–∫–æ —Ñ—Ä–∞–∑—ã)
   - –¶–µ–ª—å: –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ keywords, —É–≤–µ–ª–∏—á–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ

---

## üìä Rollout –ø–ª–∞–Ω

### –§–∞–∑–∞ 1: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1 –¥–µ–Ω—å)

1. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
2. ‚úÖ –ù–∞–ø–∏—Å–∞—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã
3. ‚úÖ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –§–∞–∑–∞ 2: Staging —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1-2 –¥–Ω—è)

1. ‚úÖ –î–µ–ø–ª–æ–π –Ω–∞ staging —Å–µ—Ä–≤–µ—Ä
2. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö keywords
3. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
4. ‚úÖ –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫

### –§–∞–∑–∞ 3: Production rollout (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π)

**–î–µ–Ω—å 1:**
1. ‚úÖ –î–µ–ø–ª–æ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞ production
2. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫ –∏ –ª–æ–≥–æ–≤
3. ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –æ—Ç–∫–∞—Ç—É

**–ù–µ–¥–µ–ª—è 1:**
1. ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫:
   - –ß–∞—Å—Ç–æ—Ç–∞ –≤—ã–∑–æ–≤–∞ AI
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä—É—á–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
   - –ñ–∞–ª–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
2. ‚úÖ –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

**–ù–µ–¥–µ–ª—è 2:**
1. ‚úÖ –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞ –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞—Ä—ã—Ö keywords
2. ‚úÖ –û—Ü–µ–Ω–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π
3. ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –Ω–µ–¥–µ–ª–∏)

1. ‚úÖ **–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π**
   - "–°–æ—Å–∏—Å–∫–∞ –≤ —Ç–µ—Å—Ç–µ" ‚â† "–¢–µ—Å—Ç" ‚úÖ
   - –ù–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏ "–†–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∏" –¥–ª—è –µ–¥—ã

2. ‚úÖ **–£–º–µ–Ω—å—à–µ–Ω–∏–µ –º—É—Å–æ—Ä–Ω—ã—Ö keywords**
   - –û—á–∏—Å—Ç–∫–∞ ~70-80% –æ–¥–∏–Ω–æ—á–Ω—ã—Ö —Å–ª–æ–≤
   - –¢–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã–µ —Ñ—Ä–∞–∑—ã –≤ –ë–î

3. ‚úÖ **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—ã–∑–æ–≤–æ–≤ AI**
   - AI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–∞—â–µ –¥–ª—è —Ç–æ—á–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –ú–µ–Ω—å—à–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –Ω–µ—Ç–æ—á–Ω—ã—Ö keywords

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (1 –º–µ—Å—è—Ü)

1. ‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏**
   - –ú–µ–Ω—å—à–µ —Ä—É—á–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
   - –ë–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

2. ‚úÖ **–£–ª—É—á—à–µ–Ω–∏–µ UX**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–Ω–∏–º–∞—é—Ç –ª–æ–≥–∏–∫—É –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –°–∏—Å—Ç–µ–º–∞ –æ–±—É—á–∞–µ—Ç—Å—è –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

3. ‚úÖ **–ß–∏—Å—Ç–∞—è –ë–î keywords**
   - –¢–æ–ª—å–∫–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ—Ä–∞–∑—ã
   - –õ–µ–≥–∫–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å

---

## üìö –î–∞–ª—å–Ω–µ–π—à–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –í–∞—Ä–∏–∞–Ω—Ç–∞ C –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å:

1. **Fuzzy matching (–í–∞—Ä–∏–∞–Ω—Ç B)** –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
   - –î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ "—Ç–æ—á–Ω–æ–µ" –∏ "–Ω–∞—á–∞–ª–æ —Ñ—Ä–∞–∑—ã"
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–µ—Ä–≤—ã–µ –¥–≤–∞ —É—Ä–æ–≤–Ω—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª–∏
   - –ü–æ—Ä–æ–≥ similarity: 85%

2. **Stemming –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ**
   - "—Å–æ—Å–∏—Å–∫–∞" = "—Å–æ—Å–∏—Å–∫–∏" = "—Å–æ—Å–∏—Å–æ–∫"
   - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: `pymorphy2` –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ

3. **–°–∏–Ω–æ–Ω–∏–º—ã**
   - "–∫–∞—Ñ–µ" = "—Ä–µ—Å—Ç–æ—Ä–∞–Ω" = "—Å—Ç–æ–ª–æ–≤–∞—è"
   - "–ø—Ä–æ–¥—É–∫—Ç—ã" = "–µ–¥–∞" = "groceries"

4. **ML –º–æ–¥–µ–ª—å –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏**
   - –û–±—É—á–∏—Ç—å –Ω–∞ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–æ/–≤–º–µ—Å—Ç–µ —Å AI

5. **UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è keywords**
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –µ–≥–æ saved keywords
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–∏—Ç—å –Ω–µ–Ω—É–∂–Ω—ã–µ
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- `docs/ARCHITECTURE.md` - –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
- `bot/utils/keyword_service.py` - **–ù–û–í–´–ô** - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å keywords
- `bot/utils/expense_parser.py` - –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç—Ä–∞—Ç –∏ –¥–æ—Ö–æ–¥–æ–≤
- `expense_bot/celery_tasks.py` - Celery –∑–∞–¥–∞—á–∏ –æ–±—É—á–µ–Ω–∏—è keywords (`learn_keywords_on_create`, `learn_income_keywords_on_create`)

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö:
- `expenses/models.py` - –ú–æ–¥–µ–ª–∏ `CategoryKeyword`, `IncomeCategoryKeyword`, `Expense`, `Income`

### –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ñ–∞–π–ª—ã (–±—É–¥—É—Ç –∑–∞–º–µ–Ω–µ–Ω—ã):
- `bot/services/income_categorization.py` - –§—É–Ω–∫—Ü–∏—è `ensure_unique_income_keyword()` (–∑–∞–º–µ–Ω–µ–Ω–∞ –Ω–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é)

---

**–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω:** 2026-01-10
**–ê–≤—Ç–æ—Ä:** Claude (AI Assistant)
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤ –∫ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—é

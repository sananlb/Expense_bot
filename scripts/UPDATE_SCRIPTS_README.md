# üöÄ –°–∫—Ä–∏–ø—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Coins Bot

## üìã –î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

### ‚ö° `quick_bot_update.sh` - –ë—ã—Å—Ç—Ä–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ –∫–æ–¥–µ –±–æ—Ç–∞ (`bot/`)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–æ–≤ –≤ –ª–æ–≥–∏–∫–µ –±–æ—Ç–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (—Ç–µ–∫—Å—Ç–æ–≤)
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–æ—É—Ç–µ—Ä–∞—Ö, —Å–µ—Ä–≤–∏—Å–∞—Ö, —É—Ç–∏–ª–∏—Ç–∞—Ö –±–æ—Ç–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ **–ù–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–π –ë–î**
- ‚úÖ **–ù–µ –Ω—É–∂–Ω–æ —Ç—Ä–æ–≥–∞—Ç—å –≤–µ–±/celery/redis**

**–ß—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç:**
- ü§ñ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–æ—Ç–∞ (app)
- üîó Telegram webhook

**–ß—Ç–æ –ù–ï —Ç—Ä–æ–≥–∞–µ—Ç:**
- üåê –í–µ–±-–ø–∞–Ω–µ–ª—å (web)
- ‚öôÔ∏è Celery –≤–æ—Ä–∫–µ—Ä—ã (celery, celery_beat)
- üíæ Redis
- üé® –õ–µ–Ω–¥–∏–Ω–≥

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~30-60 —Å–µ–∫—É–Ω–¥

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
cd /home/batman/expense_bot
bash scripts/quick_bot_update.sh
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** ‚úÖ –û—á–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ
- –ù–µ —Ç—Ä–æ–≥–∞–µ—Ç –ë–î
- –ù–µ —Ç—Ä–æ–≥–∞–µ—Ç –¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç (–ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä)

---

### üîÑ `full_update.sh` - –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- ‚úÖ –ï—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (`python manage.py migrate`)
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–æ–¥–µ–ª—è—Ö Django
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (requirements.txt)
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ–±-–ø–∞–Ω–µ–ª–∏
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Celery –∑–∞–¥–∞—á
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–µ–Ω–¥–∏–Ω–≥–∞
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ nginx/docker-compose

**–ß—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç:**
- ü§ñ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –±–æ—Ç–∞ (app)
- üåê –í–µ–±-–ø–∞–Ω–µ–ª—å (web)
- ‚öôÔ∏è Celery –≤–æ—Ä–∫–µ—Ä—ã (celery, celery_beat)
- üíæ Redis
- üé® –õ–µ–Ω–¥–∏–Ω–≥
- üîó Telegram webhook

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~3-5 –º–∏–Ω—É—Ç

**–ö–æ–º–∞–Ω–¥–∞:**
```bash
cd /home/batman/expense_bot
bash scripts/full_update.sh
```

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –æ–±—Ä–∞–∑—ã
- –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏–π –ë–î

---

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

| –ö—Ä–∏—Ç–µ—Ä–∏–π | `quick_bot_update.sh` | `full_update.sh` |
|----------|----------------------|------------------|
| –°–∫–æ—Ä–æ—Å—Ç—å | ‚ö° 30-60 —Å–µ–∫ | üïê 3-5 –º–∏–Ω |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | ‚úÖ –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è | ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è |
| Downtime | üü¢ 5-10 —Å–µ–∫ | üü° 1-2 –º–∏–Ω |
| –û–±–Ω–æ–≤–ª—è–µ—Ç –ë–î | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| –û–±–Ω–æ–≤–ª—è–µ—Ç –ª–µ–Ω–¥–∏–Ω–≥ | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| –û–±–Ω–æ–≤–ª—è–µ—Ç –≤–µ–± | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| –û–±–Ω–æ–≤–ª—è–µ—Ç celery | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |

---

## üéØ –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ò—Å–ø—Ä–∞–≤–∏–ª –±–∞–≥ –≤ –±–æ—Ç–µ
```bash
# –ò–∑–º–µ–Ω–µ–Ω–∏—è: bot/routers/expense.py
# –ù–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–π, –Ω–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è—Ö
bash scripts/quick_bot_update.sh  # ‚ö° –ë—ã—Å—Ç—Ä–æ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –î–æ–±–∞–≤–∏–ª –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã
```bash
# –ò–∑–º–µ–Ω–µ–Ω–∏—è: bot/texts.py, bot/routers/start.py
# –ù–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–π, —Ç–æ–ª—å–∫–æ –∫–æ–¥ –±–æ—Ç–∞
bash scripts/quick_bot_update.sh  # ‚ö° –ë—ã—Å—Ç—Ä–æ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –î–æ–±–∞–≤–∏–ª –Ω–æ–≤–æ–µ –ø–æ–ª–µ –≤ –º–æ–¥–µ–ª—å
```bash
# –ò–∑–º–µ–Ω–µ–Ω–∏—è: expenses/models.py + –º–∏–≥—Ä–∞—Ü–∏—è
# –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –ë–î
bash scripts/full_update.sh  # üîÑ –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –û–±–Ω–æ–≤–∏–ª –ª–µ–Ω–¥–∏–Ω–≥
```bash
# –ò–∑–º–µ–Ω–µ–Ω–∏—è: landing/index.html
# –ù—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –Ω–∞ nginx
bash scripts/full_update.sh  # üîÑ –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 5: –î–æ–±–∞–≤–∏–ª –Ω–æ–≤—É—é Celery –∑–∞–¥–∞—á—É
```bash
# –ò–∑–º–µ–Ω–µ–Ω–∏—è: bot/tasks/analytics.py
# –ù—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å celery
bash scripts/full_update.sh  # üîÑ –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 6: –ò–∑–º–µ–Ω–∏–ª requirements.txt
```bash
# –î–æ–±–∞–≤–∏–ª–∏ –Ω–æ–≤—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É
# –ù—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –≤—Å–µ –æ–±—Ä–∞–∑—ã
bash scripts/full_update.sh  # üîÑ –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```

---

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ—Ç–∫–∞—Ç

### –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç –ø–æ—Å–ª–µ quick_bot_update.sh:
```bash
# –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –∫–æ–º–º–∏—Ç—É
git reset --hard HEAD~1
docker-compose build --no-cache app
docker-compose up -d --force-recreate app
```

### –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–∫–∞—Ç –ø–æ—Å–ª–µ full_update.sh:
```bash
# –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –∫–æ–º–º–∏—Ç—É
git reset --hard HEAD~1
bash scripts/full_update.sh
```

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `quick_bot_update.sh`** –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ –±–æ—Ç–∞
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `full_update.sh`** —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
3. **–í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
   ```bash
   docker-compose logs app --tail 50 -f
   ```
4. **–î–µ–ª–∞–π—Ç–µ backup –ë–î** –ø–µ—Ä–µ–¥ –ø–æ–ª–Ω—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏:
   ```bash
   docker exec expense_bot_db pg_dump -U expense_user expense_bot > backup_$(date +%Y%m%d).sql
   ```

---

## ‚ùì –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å quick_bot_update.sh –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª bot/services/category.py?**
A: ‚úÖ –î–∞! –ï—Å–ª–∏ –Ω–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–π –ë–î, —Ç–æ —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ.

**Q: –ù—É–∂–Ω–æ –ª–∏ –ø–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª —Ç–æ–ª—å–∫–æ bot/texts.py?**
A: ‚ùå –ù–µ—Ç! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ quick_bot_update.sh - —ç—Ç–æ –±—ã—Å—Ç—Ä–µ–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ.

**Q: –ö–æ–≥–¥–∞ —Ç–æ—á–Ω–æ –Ω—É–∂–Ω–æ full_update.sh?**
A: ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î, –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ requirements.txt, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–µ–Ω–¥–∏–Ω–≥–∞, –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ docker-compose.yml

**Q: –ß—Ç–æ –µ—Å–ª–∏ –Ω–µ —É–≤–µ—Ä–µ–Ω –∫–∞–∫–æ–π —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?**
A: ü§î –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ full_update.sh - –æ–Ω –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ, —Ö–æ—Ç—å –∏ –¥–æ–ª—å—à–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `docker-compose logs app -f`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `docker-compose ps`
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é

**–ö–æ–Ω—Ç–∞–∫—Ç—ã:**
- GitHub Issues: https://github.com/sananlb/Expense_bot/issues

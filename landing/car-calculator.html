<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤–ª–∞–¥–µ–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–º | Coins Bot</title>
  <meta name="description" content="–£–∑–Ω–∞–π—Ç–µ —Å–∫–æ–ª—å–∫–æ –†–ï–ê–õ–¨–ù–û —Å—Ç–æ–∏—Ç –≤–ª–∞–¥–µ—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–º. –°—Ä–∞–≤–Ω–∏—Ç–µ —Å —Ç–∞–∫—Å–∏ –∏ –ø—Ä–æ–∫–∞—Ç–æ–º. –ü–æ—Å—á–∏—Ç–∞–π—Ç–µ —É–ø—É—â–µ–Ω–Ω—É—é –≤—ã–≥–æ–¥—É –æ—Ç –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π. –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä.">

  <!-- SEO -->
  <link rel="canonical" href="https://www.coins-bot.ru/car-calculator">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://www.coins-bot.ru/car-calculator">
  <meta property="og:title" content="–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤–ª–∞–¥–µ–Ω–∏—è –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–º">
  <meta property="og:description" content="–Ø –ø–æ—Å—á–∏—Ç–∞–ª: –º–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å –æ–±—Ö–æ–¥–∏—Ç—Å—è –≤ 142,510‚ÇΩ/–≥–æ–¥. –ê —É —Ç–µ–±—è? –ü–æ—Å—á–∏—Ç–∞–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ!">
  <meta property="og:image" content="https://www.coins-bot.ru/og-image.jpg">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-YMSY7V8YY7"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-YMSY7V8YY7');
  </script>

  <!-- Yandex.Metrika -->
  <script type="text/javascript">
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();
    for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
    k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");
    ym(104228689, "init", {clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true});
  </script>

  <!-- Fonts -->
  <link rel="stylesheet" href="fonts/fonts.css">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <style>
    :root {
      --primary: #2563eb;
      --primary-dark: #1e40af;
      --secondary: #6e82e3;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --dark: #0f172a;
      --gray: #64748b;
      --light: #f8fafc;
      --white: #ffffff;
      --radius: 16px;
      --font-body: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      --font-display: 'Sora', 'Inter', sans-serif;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: var(--font-body);
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      color: var(--dark);
      line-height: 1.6;
      min-height: 100vh;
    }

    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header */
    header {
      background: var(--white);
      padding: 20px 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      margin-bottom: 40px;
    }

    .header-content {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
      text-decoration: none;
      font-family: var(--font-display);
      font-size: 24px;
      font-weight: 700;
      color: var(--primary);
    }

    .logo img {
      width: 40px;
      height: 40px;
      object-fit: contain;
    }

    .back-link {
      color: var(--gray);
      text-decoration: none;
      font-size: 14px;
      transition: color 0.2s;
    }

    .back-link:hover {
      color: var(--primary);
    }

    /* Hero */
    .hero {
      text-align: center;
      margin-bottom: 60px;
    }

    .hero h1 {
      font-family: var(--font-display);
      font-size: 48px;
      font-weight: 700;
      color: var(--dark);
      margin-bottom: 20px;
      line-height: 1.2;
    }

    .hero p {
      font-size: 20px;
      color: var(--gray);
      max-width: 700px;
      margin: 0 auto;
    }

    /* Main Layout */
    .calculator-layout {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 60px;
    }

    /* Input Section */
    .input-section {
      background: var(--white);
      border-radius: var(--radius);
      padding: 30px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }

    .block {
      margin-bottom: 40px;
      padding-bottom: 30px;
      border-bottom: 2px solid #e5e7eb;
    }

    .block:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .block-title {
      font-size: 20px;
      font-weight: 600;
      color: var(--dark);
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .field-group {
      margin-bottom: 20px;
    }

    .field-group:last-child {
      margin-bottom: 0;
    }

    label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      color: var(--dark);
      margin-bottom: 8px;
    }

    .label-with-tooltip {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .tooltip {
      position: relative;
      display: inline-block;
      cursor: help;
      color: var(--gray);
      font-size: 16px;
    }

    .tooltip:hover::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 50%;
      bottom: 100%;
      transform: translateX(-50%);
      background: var(--dark);
      color: var(--white);
      padding: 8px 12px;
      border-radius: 8px;
      font-size: 12px;
      white-space: nowrap;
      z-index: 10;
      margin-bottom: 5px;
    }

    input[type="number"],
    input[type="range"],
    select {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 12px;
      font-size: 16px;
      font-family: var(--font-body);
      transition: border-color 0.2s;
    }

    input[type="number"]:focus,
    select:focus {
      outline: none;
      border-color: var(--primary);
    }

    /* Range slider styles */
    input[type="range"] {
      height: 8px;
      padding: 0;
      background: #e5e7eb;
      border: none;
      border-radius: 4px;
      outline: none;
      -webkit-appearance: none;
    }

    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      background: var(--primary);
      cursor: pointer;
      border-radius: 50%;
    }

    input[type="range"]::-moz-range-thumb {
      width: 20px;
      height: 20px;
      background: var(--primary);
      cursor: pointer;
      border-radius: 50%;
      border: none;
    }

    .range-labels {
      display: flex;
      justify-content: space-between;
      margin-top: 8px;
      font-size: 12px;
      color: var(--gray);
    }

    .range-value {
      text-align: center;
      font-size: 18px;
      font-weight: 600;
      color: var(--primary);
      margin-top: 8px;
    }

    .calculated-field {
      background: #f8fafc;
      padding: 12px 16px;
      border-radius: 12px;
      font-size: 16px;
      color: var(--primary);
      font-weight: 600;
    }

    /* Results Section */
    .results-section {
      position: sticky;
      top: 20px;
      height: fit-content;
    }

    .results-card {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: var(--white);
      border-radius: var(--radius);
      padding: 30px;
      box-shadow: 0 8px 24px rgba(37, 99, 235, 0.2);
      margin-bottom: 20px;
    }

    .results-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 10px;
    }

    .results-subtitle {
      font-size: 14px;
      opacity: 0.9;
      margin-bottom: 30px;
    }

    .result-item {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 15px;
    }

    .result-item:last-child {
      margin-bottom: 0;
    }

    .result-label {
      font-size: 14px;
      opacity: 0.9;
      margin-bottom: 8px;
    }

    .result-value {
      font-size: 32px;
      font-weight: 700;
      font-family: var(--font-display);
    }

    .result-breakdown {
      font-size: 12px;
      opacity: 0.8;
      margin-top: 8px;
    }

    /* Chart Card */
    .chart-card {
      background: var(--white);
      border-radius: var(--radius);
      padding: 30px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      margin-bottom: 20px;
    }

    .chart-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
      color: var(--dark);
    }

    /* CTA Buttons */
    .cta-section {
      text-align: center;
      margin-top: 40px;
    }

    .cta-buttons {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn {
      padding: 16px 32px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      text-decoration: none;
      border: none;
      cursor: pointer;
      transition: all 0.2s;
      display: inline-block;
    }

    .btn-primary {
      background: var(--primary);
      color: var(--white);
    }

    .btn-primary:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
    }

    .btn-secondary {
      background: var(--white);
      color: var(--primary);
      border: 2px solid var(--primary);
    }

    .btn-secondary:hover {
      background: var(--light);
    }

    /* Responsive */
    @media (max-width: 968px) {
      .calculator-layout {
        grid-template-columns: 1fr;
      }

      .results-section {
        position: static;
      }

      .hero h1 {
        font-size: 36px;
      }
    }

    @media (max-width: 640px) {
      .hero h1 {
        font-size: 28px;
      }

      .hero p {
        font-size: 16px;
      }

      .result-value {
        font-size: 24px;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="header-content">
      <a href="/" class="logo">
        <img src="logo_v3.webp" alt="Coins Bot">
        <span>Coins</span>
      </a>
      <a href="/" class="back-link">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
  </header>

  <div class="container">
    <!-- Hero -->
    <div class="hero">
      <h1>üöó –°–∫–æ–ª—å–∫–æ –†–ï–ê–õ–¨–ù–û —Å—Ç–æ–∏—Ç –≤–ª–∞–¥–µ—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–º?</h1>
      <p>–£–∑–Ω–∞–π—Ç–µ –Ω–∞—Å—Ç–æ—è—â—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤–ª–∞–¥–µ–Ω–∏—è –∞–≤—Ç–æ –∏ —Å—Ä–∞–≤–Ω–∏—Ç–µ —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞–º–∏</p>
    </div>

    <!-- Calculator Layout -->
    <div class="calculator-layout">
      <!-- Left Column: Input -->
      <div class="input-section">
        <!-- Block 1: Car Info -->
        <div class="block">
          <h3 class="block-title">üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–≤—Ç–æ–º–æ–±–∏–ª–µ</h3>

          <div class="field-group">
            <label>
              <span class="label-with-tooltip">
                –°—Ç–æ–∏–º–æ—Å—Ç—å –∞–≤—Ç–æ–º–æ–±–∏–ª—è (‚ÇΩ)
                <span class="tooltip" data-tooltip="–¢–µ–∫—É—â–∞—è —Ä—ã–Ω–æ—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –≤–∞—à–µ–≥–æ –∞–≤—Ç–æ">‚ÑπÔ∏è</span>
              </span>
            </label>
            <input type="number" id="carCost" value="2700000" step="100000">
          </div>

          <div class="field-group">
            <label>–ü—Ä–æ–±–µ–≥ –∑–∞ –≥–æ–¥ (–∫–º)</label>
            <input type="number" id="yearlyMileage" value="10000" step="1000">
          </div>
        </div>

        <!-- Block 2: Car Expenses -->
        <div class="block">
          <h3 class="block-title">üöó –†–∞—Å—Ö–æ–¥—ã –Ω–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—å</h3>

          <div class="field-group">
            <label>–†–∞—Å—Ö–æ–¥ —Ç–æ–ø–ª–∏–≤–∞ (–ª/100–∫–º)</label>
            <input type="number" id="fuelConsumption" value="10" step="0.5" min="0">
          </div>

          <div class="field-group">
            <label>–°—Ç–æ–∏–º–æ—Å—Ç—å —Ç–æ–ø–ª–∏–≤–∞ (‚ÇΩ/–ª)</label>
            <input type="number" id="fuelPrice" value="55" step="1" min="0">
          </div>

          <div class="field-group">
            <label>–û–°–ê–ì–û (‚ÇΩ/–≥–æ–¥)</label>
            <input type="number" id="osago" value="15000" step="1000">
          </div>

          <div class="field-group">
            <label>
              <span class="label-with-tooltip">
                –ö–ê–°–ö–û (‚ÇΩ/–≥–æ–¥)
                <span class="tooltip" data-tooltip="–û–±—ã—á–Ω–æ 2-5% –æ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∞–≤—Ç–æ">‚ÑπÔ∏è</span>
              </span>
            </label>
            <input type="number" id="kasko" value="0" step="5000">
          </div>

          <div class="field-group">
            <label>
              <span class="label-with-tooltip">
                –õ–æ—à–∞–¥–∏–Ω—ã–µ —Å–∏–ª—ã
                <span class="tooltip" data-tooltip="–ú–æ—â–Ω–æ—Å—Ç—å –¥–≤–∏–≥–∞—Ç–µ–ª—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –Ω–∞–ª–æ–≥–∞">‚ÑπÔ∏è</span>
              </span>
            </label>
            <input type="number" id="horsePower" value="190" step="10" min="0">
          </div>

          <div class="field-group">
            <label>–ú–æ–π–∫–∞ (‚ÇΩ/–º–µ—Å—è—Ü)</label>
            <input type="number" id="carWash" value="1000" step="500">
          </div>

          <div class="field-group">
            <label>–®—Ç—Ä–∞—Ñ—ã (‚ÇΩ/–º–µ—Å—è—Ü)</label>
            <input type="number" id="fines" value="250" step="100">
          </div>

          <div class="field-group">
            <label>–ü–∞—Ä–∫–æ–≤–∫–∞ (‚ÇΩ/–º–µ—Å—è—Ü)</label>
            <input type="number" id="parking" value="0" step="1000">
          </div>

          <div class="field-group">
            <label>
              <span class="label-with-tooltip">
                –¢–û –∏ —Ä–µ–º–æ–Ω—Ç—ã (‚ÇΩ/–≥–æ–¥)
                <span class="tooltip" data-tooltip="–ü–ª–∞–Ω–æ–≤–æ–µ –¢–û + –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã–π —Ä–µ–º–æ–Ω—Ç">‚ÑπÔ∏è</span>
              </span>
            </label>
            <input type="number" id="maintenance" value="45000" step="5000">
          </div>

          <div class="field-group">
            <label>–†–∞—Å—Ö–æ–¥–Ω–∏–∫–∏ (‚ÇΩ/–≥–æ–¥)</label>
            <input type="number" id="consumables" value="3000" step="1000">
          </div>
        </div>

        <!-- Block 3: Alternative -->
        <div class="block">
          <h3 class="block-title">üöï –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –¢–∞–∫—Å–∏ + –ü—Ä–æ–∫–∞—Ç</h3>

          <div class="field-group">
            <label>–ü–æ–µ–∑–¥–æ–∫ –Ω–∞ —Ç–∞–∫—Å–∏ –≤ –Ω–µ–¥–µ–ª—é</label>
            <input type="number" id="taxiTripsWeek" value="4" step="1">
          </div>

          <div class="field-group">
            <label>–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–µ–∑–¥–∫–∏ –Ω–∞ —Ç–∞–∫—Å–∏ (‚ÇΩ)</label>
            <input type="number" id="taxiCost" value="500" step="50">
          </div>

          <div class="field-group">
            <label>–ü—Ä–æ–∫–∞—Ç –∞–≤—Ç–æ (—Ä–∞–∑ –≤ –º–µ—Å—è—Ü)</label>
            <input type="number" id="rentalTimesMonth" value="2" step="1">
          </div>

          <div class="field-group">
            <label>–°—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–æ–∫–∞—Ç–∞ (‚ÇΩ/—Å—É—Ç–∫–∏)</label>
            <input type="number" id="rentalCostDay" value="6000" step="500">
          </div>

          <div class="field-group">
            <label>–î–Ω–µ–π –∞—Ä–µ–Ω–¥—ã –∑–∞ —Ä–∞–∑</label>
            <input type="number" id="rentalDays" value="1" step="1">
          </div>
        </div>

        <!-- Block 4: Investment -->
        <div class="block">
          <h3 class="block-title">üìà –£–ø—É—â–µ–Ω–Ω–∞—è –≤—ã–≥–æ–¥–∞ –æ—Ç –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π</h3>

          <div class="field-group">
            <label>
              <span class="label-with-tooltip">
                –î–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π (%/–≥–æ–¥)
                <span class="tooltip" data-tooltip="–°—Ä–µ–¥–Ω—è—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞ –ú–æ—Å–±–∏—Ä–∂–∏: ~14%">‚ÑπÔ∏è</span>
              </span>
            </label>
            <input type="range" id="investmentReturn" min="12" max="16" step="2" value="14">
            <div class="range-labels">
              <span>12%</span>
              <span>14%</span>
              <span>16%</span>
            </div>
            <div class="range-value" id="returnPercent">14%</div>
          </div>

          <div class="field-group">
            <label>–£–ø—É—â–µ–Ω–Ω–∞—è –≤—ã–≥–æ–¥–∞ –≤ –≥–æ–¥:</label>
            <div class="calculated-field" id="lostProfit">0 ‚ÇΩ</div>
          </div>
        </div>
      </div>

      <!-- Right Column: Results -->
      <div class="results-section">
        <!-- Comparison Chart -->
        <div class="chart-card">
          <h3 class="chart-title">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤</h3>
          <canvas id="comparisonChart"></canvas>
        </div>

        <!-- Results Card -->
        <div class="results-card">
          <h2 class="results-title">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h2>
          <p class="results-subtitle">–ü–æ–ª–Ω–∞—è —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å —É—á–µ—Ç–æ–º —É–ø—É—â–µ–Ω–Ω–æ–π –≤—ã–≥–æ–¥—ã</p>

          <div class="result-item">
            <div class="result-label">–°–≤–æ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å</div>
            <div class="result-value" id="carTotal">0 ‚ÇΩ</div>
            <div class="result-breakdown" id="carBreakdown"></div>
          </div>

          <div class="result-item">
            <div class="result-label">–¢–∞–∫—Å–∏ + –ø—Ä–æ–∫–∞—Ç</div>
            <div class="result-value" id="taxiTotal">0 ‚ÇΩ</div>
            <div class="result-breakdown" id="taxiBreakdown"></div>
          </div>

          <div class="result-item" style="background: rgba(255,255,255,0.25);">
            <div class="result-label">–†–∞–∑–Ω–∏—Ü–∞</div>
            <div class="result-value" id="difference">0 ‚ÇΩ</div>
            <div class="result-breakdown" id="differenceText"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- CTA Section -->
    <div class="cta-section">
      <div class="cta-buttons">
        <a href="https://t.me/showmecoin_bot" class="btn btn-primary" target="_blank">
          ü§ñ –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å Coins Bot –±–µ—Å–ø–ª–∞—Ç–Ω–æ
        </a>
        <a href="/" class="btn btn-secondary">
          üåê –£–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ –±–æ—Ç–µ
        </a>
      </div>
    </div>
  </div>

  <script>
    // Chart instance
    let comparisonChart;

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      initCharts();
      calculate();

      // Add event listeners to all inputs
      const inputs = document.querySelectorAll('input, select');
      inputs.forEach(input => {
        input.addEventListener('input', calculate);
        input.addEventListener('change', calculate);
      });

      // Special handler for range slider
      document.getElementById('investmentReturn').addEventListener('input', function() {
        document.getElementById('returnPercent').textContent = this.value + '%';
      });
    });

    function calculateCarTax(horsePower) {
      // Tax rate depends on engine power (regional average)
      let rate;
      if (horsePower <= 100) {
        rate = 2.5;
      } else if (horsePower <= 150) {
        rate = 3.5;
      } else if (horsePower <= 200) {
        rate = 5;
      } else if (horsePower <= 250) {
        rate = 7.5;
      } else {
        rate = 15;
      }
      return horsePower * rate;
    }

    function calculate() {
      // Get all values
      const carCost = parseFloat(document.getElementById('carCost').value) || 0;
      const yearlyMileage = parseFloat(document.getElementById('yearlyMileage').value) || 0;

      const fuelConsumption = parseFloat(document.getElementById('fuelConsumption').value) || 0;
      const fuelPrice = parseFloat(document.getElementById('fuelPrice').value) || 0;
      const osago = parseFloat(document.getElementById('osago').value) || 0;
      const kasko = parseFloat(document.getElementById('kasko').value) || 0;
      const horsePower = parseFloat(document.getElementById('horsePower').value) || 0;
      const carWash = parseFloat(document.getElementById('carWash').value) || 0;
      const fines = parseFloat(document.getElementById('fines').value) || 0;
      const parking = parseFloat(document.getElementById('parking').value) || 0;
      const maintenance = parseFloat(document.getElementById('maintenance').value) || 0;
      const consumables = parseFloat(document.getElementById('consumables').value) || 0;

      const taxiTripsWeek = parseFloat(document.getElementById('taxiTripsWeek').value) || 0;
      const taxiCost = parseFloat(document.getElementById('taxiCost').value) || 0;
      const rentalTimesMonth = parseFloat(document.getElementById('rentalTimesMonth').value) || 0;
      const rentalCostDay = parseFloat(document.getElementById('rentalCostDay').value) || 0;
      const rentalDays = parseFloat(document.getElementById('rentalDays').value) || 1;

      const investmentReturn = parseFloat(document.getElementById('investmentReturn').value) || 14;

      // Calculate fuel cost per year
      const fuelCost = (yearlyMileage / 100) * fuelConsumption * fuelPrice;

      // Calculate car tax based on horse power
      const carTax = calculateCarTax(horsePower);

      // Calculate car expenses
      const monthlyExpenses = (carWash + fines + parking);
      const yearlyExpenses = fuelCost + osago + kasko + carTax + (monthlyExpenses * 12) + maintenance + consumables;

      // Calculate taxi + rental
      const taxiYearly = taxiTripsWeek * 52 * taxiCost;
      const rentalYearly = rentalTimesMonth * 12 * rentalCostDay * rentalDays;
      const alternativeTotal = taxiYearly + rentalYearly;

      // Calculate lost profit
      const lostProfit = carCost * (investmentReturn / 100);
      document.getElementById('lostProfit').textContent = formatMoney(lostProfit);

      // Calculate totals (TCO - with lost profit)
      const carTotal = yearlyExpenses + lostProfit;
      const taxiTotal = alternativeTotal;
      const difference = carTotal - taxiTotal;

      // Update display
      document.getElementById('carTotal').textContent = formatMoney(carTotal);
      document.getElementById('taxiTotal').textContent = formatMoney(taxiTotal);
      document.getElementById('difference').textContent = formatMoney(Math.abs(difference));

      // Breakdown
      const costPerKm = yearlyMileage > 0 ? carTotal / yearlyMileage : 0;
      document.getElementById('carBreakdown').textContent =
        `–†–∞—Å—Ö–æ–¥—ã: ${formatMoney(yearlyExpenses)} + –£–ø—É—â–µ–Ω–æ: ${formatMoney(lostProfit)} ‚Ä¢ ${formatMoney(costPerKm)}/–∫–º`;

      document.getElementById('taxiBreakdown').textContent =
        `–¢–æ–ª—å–∫–æ –ø—Ä—è–º—ã–µ —Ä–∞—Å—Ö–æ–¥—ã`;

      // Difference text
      if (difference > 0) {
        document.getElementById('differenceText').textContent =
          `–¢–∞–∫—Å–∏+–ø—Ä–æ–∫–∞—Ç –¥–µ—à–µ–≤–ª–µ –Ω–∞ ${formatMoney(Math.abs(difference))}/–≥–æ–¥`;
      } else if (difference < 0) {
        document.getElementById('differenceText').textContent =
          `–°–≤–æ–π –∞–≤—Ç–æ –¥–µ—à–µ–≤–ª–µ –Ω–∞ ${formatMoney(Math.abs(difference))}/–≥–æ–¥`;
      } else {
        document.getElementById('differenceText').textContent =
          `–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–≤–Ω—ã –ø–æ —Å—Ç–æ–∏–º–æ—Å—Ç–∏`;
      }

      // Update chart
      updateCharts(yearlyExpenses, lostProfit, taxiTotal);
    }

    function formatMoney(value) {
      return new Intl.NumberFormat('ru-RU', {
        style: 'currency',
        currency: 'RUB',
        minimumFractionDigits: 0,
        maximumFractionDigits: 0
      }).format(value);
    }

    function initCharts() {
      // Stacked bar comparison chart
      const ctx = document.getElementById('comparisonChart').getContext('2d');
      comparisonChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['–°–≤–æ–π –∞–≤—Ç–æ', '–¢–∞–∫—Å–∏ + –ø—Ä–æ–∫–∞—Ç'],
          datasets: [
            {
              label: '–ü—Ä—è–º—ã–µ —Ä–∞—Å—Ö–æ–¥—ã',
              data: [0, 0],
              backgroundColor: '#3b82f6'
            },
            {
              label: '–£–ø—É—â–µ–Ω–Ω–∞—è –≤—ã–≥–æ–¥–∞',
              data: [0, 0],
              backgroundColor: '#f59e0b'
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          scales: {
            x: {
              stacked: true
            },
            y: {
              stacked: true,
              beginAtZero: true,
              ticks: {
                callback: function(value) {
                  return formatMoney(value);
                }
              }
            }
          },
          plugins: {
            legend: {
              position: 'bottom'
            },
            tooltip: {
              callbacks: {
                label: function(context) {
                  return context.dataset.label + ': ' + formatMoney(context.parsed.y);
                }
              }
            }
          }
        }
      });
    }

    function updateCharts(yearlyExpenses, lostProfit, taxiTotal) {
      // Update stacked bar chart
      comparisonChart.data.datasets[0].data = [yearlyExpenses, taxiTotal];
      comparisonChart.data.datasets[1].data = [lostProfit, 0];
      comparisonChart.update();
    }
  </script>
</body>
</html>
